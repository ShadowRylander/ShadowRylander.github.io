<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.56 in css mode. -->
<html>
  <head>
    <title>AlBasmala.org</title>
    <style type="text/css">
    <!--
      body {
        color: #556b72;
        background-color: #FDF6E3;
      }
      .bold {
        /* bold */
        font-weight: bold;
      }
      .bold-italic {
        /* bold-italic */
        font-weight: bold;
        font-style: italic;
      }
      .builtin {
        /* font-lock-builtin-face */
        color: #d33682;
        font-style: italic;
      }
      .comment {
        /* font-lock-comment-face */
        color: #96A7A9;
        font-style: italic;
      }
      .comment-delimiter {
        /* font-lock-comment-delimiter-face */
        color: #96A7A9;
        font-style: italic;
      }
      .constant {
        /* font-lock-constant-face */
        color: #6c71c4;
        font-weight: bold;
      }
      .css-property {
        /* css-property */
        color: #859900;
      }
      .css-proprietary-property {
        /* css-proprietary-property */
        color: #cb4b16;
      }
      .css-selector {
        /* css-selector */
        color: #268bd2;
      }
      .custom {
        /* (:background "#ff0000" :foreground "white" :box (:line-width -1)) */
        color: #ffffff;
        background-color: #ff0000;
      }
      .custom-1 {
        /* (:background "#ffc0cb" :foreground "black" :box (:line-width -1)) */
        color: #000000;
        background-color: #ffc0cb;
      }
      .custom-10 {
        /* (:background "#4183c4" :foreground "white" :box (:line-width -1)) */
        color: #ffffff;
        background-color: #4183c4;
      }
      .custom-11 {
        /* (:background "#fff" :foreground "black" :box (:line-width -1)) */
        color: #000000;
        background-color: #fff;
      }
      .custom-12 {
        /* (:background "#ddd" :foreground "black" :box (:line-width -1)) */
        color: #000000;
        background-color: #ddd;
      }
      .custom-13 {
        /* (:background "#000000" :foreground "white" :box (:line-width -1)) */
        color: #ffffff;
        background-color: #000000;
      }
      .custom-14 {
        /* (:strike-through t) */
        text-decoration: line-through;
      }
      .custom-2 {
        /* (:background "#777777" :foreground "white" :box (:line-width -1)) */
        color: #ffffff;
        background-color: #777777;
      }
      .custom-3 {
        /* (:background "#ffffff" :foreground "black" :box (:line-width -1)) */
        color: #000000;
        background-color: #ffffff;
      }
      .custom-4 {
        /* (:foreground "#c7c7ab3c0000") */
        color: #c7c7ab3c0000;
      }
      .custom-5 {
        /* (:foreground "#c7c70000ab3c") */
        color: #c7c70000ab3c;
      }
      .custom-6 {
        /* (:foreground "#7228559e6e14") */
        color: #7228559e6e14;
      }
      .custom-7 {
        /* (:foreground "#2acf9cf76c0a") */
        color: #2acf9cf76c0a;
      }
      .custom-8 {
        /* (:height 300 :underline (:color "red" :style wave) :overline "red" :strike-through "red") */
        text-decoration: underline;
        text-decoration: overline;
        text-decoration: line-through;
      }
      .custom-9 {
        /* (:foreground "orange") */
        color: #ffa500;
      }
      .doc {
        /* font-lock-doc-face */
        color: #35a69c;
        font-style: italic;
      }
      .flyspell-duplicate {
        /* flyspell-duplicate */
        text-decoration: underline;
      }
      .flyspell-incorrect {
        /* flyspell-incorrect */
        text-decoration: underline;
      }
      .function-name {
        /* font-lock-function-name-face */
        color: #b58900;
      }
      .highlight-defined-builtin-function-name {
        /* highlight-defined-builtin-function-name-face */
        color: #b58900;
      }
      .highlight-defined-function-name {
        /* highlight-defined-function-name-face */
        color: #b58900;
      }
      .highlight-defined-variable-name {
        /* highlight-defined-variable-name-face */
        color: #268bd2;
      }
      .italic {
        /* italic */
        font-style: italic;
      }
      .keyword {
        /* font-lock-keyword-face */
        color: #859900;
        font-weight: bold;
      }
      .org-block {
        /* org-block */
        background-color: #faf1d9;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        background-color: #f7edd0;
      }
      .org-block-end-line {
        /* org-block-end-line */
        background-color: #f7edd0;
      }
      .org-code {
        /* org-code */
        color: #cb4b16;
      }
      .org-document-info {
        /* org-document-info */
        color: #d33682;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #D6D6D6;
      }
      .org-document-title {
        /* org-document-title */
        color: #d33682;
        font-weight: bold;
      }
      .org-drawer {
        /* org-drawer */
        color: #0000ff;
      }
      .org-formula {
        /* org-formula */
        color: #2aa198;
      }
      .org-hide {
        /* org-hide */
        color: #FDF6E3;
      }
      .org-latex-and-related {
        /* org-latex-and-related */
        color: #626C6C;
        font-weight: bold;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #268bd2;
        font-weight: bold;
      }
      .org-level-2 {
        /* org-level-2 */
        color: #d33682;
        font-weight: bold;
      }
      .org-level-3 {
        /* org-level-3 */
        color: #6c71c4;
        font-weight: bold;
      }
      .org-link {
        /* org-link */
        color: #268bd2;
        font-weight: bold;
        text-decoration: underline;
      }
      .org-list-dt {
        /* org-list-dt */
        color: #268bd2;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #35a69c;
      }
      .org-property-value {
        /* org-property-value */
        color: #35a69c;
      }
      .org-special-keyword {
        /* org-special-keyword */
        color: #35a69c;
      }
      .org-table {
        /* org-table */
        color: #6c71c4;
      }
      .org-tag {
        /* org-tag */
        color: #35a69c;
      }
      .org-target {
        /* org-target */
        text-decoration: underline;
      }
      .org-verbatim {
        /* org-verbatim */
        color: #859900;
      }
      .regexp-grouping-backslash {
        /* font-lock-regexp-grouping-backslash */
        color: #268bd2;
        font-weight: bold;
      }
      .regexp-grouping-construct {
        /* font-lock-regexp-grouping-construct */
        color: #268bd2;
        font-weight: bold;
      }
      .string {
        /* font-lock-string-face */
        color: #2aa198;
      }
      .type {
        /* font-lock-type-face */
        color: #b58900;
        font-style: italic;
      }
      .underline {
        /* underline */
        text-decoration: underline;
      }
      .variable-name {
        /* font-lock-variable-name-face */
        color: #268bd2;
      }
      .warning {
        /* font-lock-warning-face */
        color: #b58900;
      }
      .writegood-duplicates {
        /* writegood-duplicates-face */
        text-decoration: underline;
      }
      .writegood-passive-voice {
        /* writegood-passive-voice-face */
        text-decoration: underline;
      }
      .writegood-weasels {
        /* writegood-weasels-face */
        text-decoration: underline;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="org-document-info-keyword">#+title:</span> <span class="org-document-title"><span class="flyspell-duplicate">AlBasmala</span></span><span class="org-document-title">: &lt;</span><span class="org-document-title"><span class="flyspell-duplicate">br</span></span><span class="org-document-title">&gt; Blogging with Emacs &amp; Org-mode (&#8226;&#768;&#7447;&#8226;&#769;)&#1608;
</span><span class="comment"># +DATE: 2018-06-01</span>
<span class="org-document-info-keyword">#+date:</span> <span class="org-document-info">&lt;1991-08-20 19:29&gt;
</span><span class="org-meta-line">#+filetags: emacs</span>
<span class="org-meta-line">#+fileimage: org_logo.png </span><span class="org-meta-line"><span class="writegood-duplicates">150 150</span></span><span class="org-meta-line"> no-border</span>
<span class="org-meta-line">#+options: d:nil</span>
<span class="org-meta-line">#+OPTIONS: toc:nil html-postamble:nil d:nil</span>
<span class="org-meta-line">#+PROPERTY: header-args :tangle "~/blog/AlBasmala.el" :results silent :exports code</span>
<span class="org-meta-line">#+description: How my blog is setup (&#8226;&#768;&#7447;&#8226;&#769;)&#1608;</span>

<span class="comment"># C-</span><span class="comment"><span class="writegood-duplicates">c C</span></span><span class="comment">-v C-b &#8658; Evaluate all src blocks</span>

<span class="comment"># It seems that one should publish a single file before</span>
<span class="comment"># attempting to publish the project.</span>
<span class="comment"># (maybe-clone "<a href="https://github.com/alhassy/alhassy.github.io.git">https://github.com/alhassy/alhassy.github.io.git</a>" "~/blog")</span>

<span class="comment"># (cl-defun not-currently-working-with (&amp;optional z) t)</span>
<span class="comment"># (cl-defun currently-working-with (&amp;optional y) )</span>

<span class="comment"># (org-static-blog-assemble-index)</span>

<span class="comment"># Idea: Make &#926; clickable: It goes to the top of the page ^_^</span>
<span class="comment"># Idea: Make the tags at the bottom be badges, alter/advice the corresponding</span>
<span class="comment"># function</span>
<span class="comment"># Idea: Add &#8220;last updated&#8221; date to footer?</span>

<span class="comment"># (setq org-html-format-headline-function #'org-html-format-headline-default-function)</span>

<span class="org-level-1">* Abstract                                                           </span><span class="org-level-1"><span class="org-tag">:ignore:</span></span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-meta-line">#+TOC: headlines 2</span>

How my blog is setup (&#8226;&#768;&#7447;&#8226;&#769;)&#1608;

<span class="org-level-1">* Features </span><span class="org-level-1"><span class="org-tag">:ignore:</span></span>
<span class="org-drawer">  :PROPERTIES:...
</span>Here are <span class="writegood-weasels">some</span> notable features of my blog.

+ &#10003; A nice blog banner --- &#167;<span class="org-link"><a href="blog-banner">blog-banner</a></span>
+ &#10003; Overall nice looking HTML style --- <span class="org-link"><a href="http://taopeng.me/org-notes-style/">org-notes-style</a></span>
+ <span class="italic">&#10003; Dynamically</span> highlighting code from references in prose --- &#167;<span class="org-link"><a href="blog-banner">blog-banner</a></span>
+ &#10003; A floating, yet unobtrusive, table of contents --- &#167;<span class="org-link"><a href="floating-toc">floating-toc</a></span>
+ &#10003; Beautiful math using LaTeX notation,<span class="org-latex-and-related"> $\forall \phi &#8658; \exists \phi$ </span>---
  &#167;<span class="org-link"><a href="MathJax-Support">MathJax-Support</a></span>
+ &#10003; Comments for blog readers --- &#167;<span class="org-link"><a href="Comments">Comments</a></span>
+ &#10003; Tags and RSS feed for blog articles --- &#167;<span class="org-link"><a href="initial-setup">initial-setup</a></span>
+ &#10003; Articles have dedicated images, &#167;<span class="org-link"><a href="Images">Images</a></span>, which <span class="writegood-passive-voice">are displayed</span>
  on the blog's welcome page along with the article's abstract, &#167;<span class="org-link"><a href="Index">Index</a></span>
  - Auto-generated index/sitemap that shows an image and short abstract of each article
+ &#10003; Tooltips, folded regions, and badges --- <span class="org-link"><a href="badge:org-special-block-extras|1.2|informational|https://alhassy.github.io/org-special-block-extras/|Gnu-Emacs">org-special-block-extras badge</a></span>
+ &#10003; Org-mode, a rich markup, to write articles <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/2665.png" alt="&#9829;" />&#8255;<img src="../../.emacs.d/emojis/emojione-v2.2.6-22/2665.png" alt="&#9829;" />
+ &#10003; Style inline code and tables --- &#167;<span class="org-link"><a href="curvy-blocks">curvy-blocks</a></span>
+ &#10003; Augment article footers to link to the Org source and to the Github history
  --- &#167;<span class="org-link"><a href="footers">footers</a></span>
  - Org source <span class="writegood-passive-voice">is colourised</span>!
+ &#10003; Unfurling links --- &#167;<span class="org-link"><a href="unfurling">unfurling</a></span>

<span class="org-meta-line">#
# + search</span>

<span class="comment"># + Org-mode unicorn as faveicon!</span>

<span class="comment"># This, like the upcoming articles, </span><span class="comment"><span class="writegood-passive-voice">is intended</span></span><span class="comment"> to be a living document.</span>
<span class="comment"># The date serves to be date of the first release and the repo contains</span>
<span class="comment"># the history of any alterations.</span>


<span class="comment"># Briefly,</span>

<span class="comment"># + This article is a literate <a href="https://orgmode.org/">Org</a> file that when loaded executes (org-babel-tangle) to produce</span>
<span class="comment">#   an elisp file which is then loaded locally.</span>

<span class="comment"># + The resulting elisp file is then used to actually produce this webpage.</span>

<span class="comment"># The remainder of this article discusses the elisp utilities that made the second point possible.</span>

<span class="org-block-begin-line">#+begin_details
</span><span class="org-special-keyword">:title:</span> <span class="org-property-value">Super </span><span class="org-property-value"><span class="writegood-weasels">Simple</span></span><span class="org-property-value"> Intro to Org-mode</span>

Org-mode is an <span class="flyspell-duplicate">outliner</span>, a rich markup language, spreadsheet tool, literate
programming systems, and so much more.

Org-mode syntax is <span class="writegood-weasels">very</span> <span class="italic">natural</span>; e.g., the following is Org-mode!

- You can try Org-mode notation and see how it renders live
  at: <span class="org-link"><a href="http://mooz.github.io/org-js/">http://mooz.github.io/org-js/</a></span>
#+begin_src org :<span class="flyspell-duplicate">noeval</span>
+ Numbered and bulleted lists are as expected.
  - Do the things:
    1.  This first
    2.  This second
    44. [@44] This forty-fourth
  - <span class="org-verbatim">[@&#120003;]</span> at the beginning of an iterm forces
    list numbering to start at &#120003;
  - <span class="org-verbatim">[ ]</span> or <span class="org-verbatim">[X]</span> at the beginning for checkbox lists
  - Use <span class="org-verbatim">Alt &#8593;, &#8595;</span> to move items up and down lists;
    renumbering happens automatically.

+ Definitions lists:
   <span class="org-code">- term :: def</span>
+ Use a comment, such as <span class="org-verbatim"># separator</span>, between two lists
  to communicate that these are two lists that <span class="italic">happen</span> to be
  one after the other. Or use any <span class="italic">non-indented</span> text to split
  a list into two.

,* My top heading, section
  words
,** Child heading, subsection
  more words
,*** Grandchild heading, <span class="flyspell-incorrect">subsubsection</span>
    even more!
#+END_SRC

You make a heading by writing <span class="org-verbatim">* heading</span> at the start of a line, then you can
<span class="org-link"><a href="kbd:TAB">kbd:TAB</a></span> to fold/unfold its contents. A table of contents, figures, tables can <span class="writegood-passive-voice">be
requested</span> as follows:
#+BEGIN_SRC org
# figures not implemented in the HTML backend
# The &#120003; is optional and denotes headline depth
,#+toc: headlines &#120003;
,#+toc: figures
,#+toc: tables
#+END_SRC

+ <span class="bold">Markup</span> elements can <span class="writegood-passive-voice">be nested</span>.

  <span class="org-table">| Syntax                             | Result           |</span>
  <span class="org-table">|------------------------------------+------------------|</span>
  <span class="org-table">| </span><span class="org-table"><span class="org-code">/Emphasise/</span></span><span class="org-table">, italics               | </span><span class="org-table"><span class="italic">Emphasise</span></span><span class="org-table">        |</span>
  <span class="org-table">| </span><span class="org-table"><span class="org-code">*Strong*</span></span><span class="org-table">, bold                     | </span><span class="org-table"><span class="bold">Strong</span></span><span class="org-table">           |</span>
  <span class="org-table">| </span><span class="org-table"><span class="org-code">*/</span></span><span class="org-table"><span class="org-code"><span class="writegood-weasels">very</span></span></span><span class="org-table"><span class="org-code"> strongly/*</span></span><span class="org-table">, bold italics    | </span><span class="org-table"><span class="bold">/</span></span><span class="org-table"><span class="bold"><span class="writegood-weasels">very</span></span></span><span class="org-table"><span class="bold"> strongly/</span></span><span class="org-table">  |</span>
  <span class="org-table">| </span><span class="org-table"><span class="org-code">=verbatim=</span></span><span class="org-table">, monospaced typewriter  | </span><span class="org-formula"><span class="org-verbatim">verbatim</span></span><span class="org-formula">         </span><span class="org-table">|</span>
  <span class="org-table">| </span><span class="org-table"><span class="org-code">+deleted+</span></span><span class="org-table">                          | </span><span class="org-table"><span class="custom-14">deleted</span></span><span class="org-table">          |</span>
  <span class="org-table">| </span><span class="org-table"><span class="org-code">_inserted_</span></span><span class="org-table">                         | </span><span class="org-table"><span class="underline">inserted</span></span><span class="org-table">         |</span>
  <span class="org-table">| </span><span class="org-table"><span class="org-code">super^{script}ed</span></span><span class="org-table">                   | super^{script}ed |</span>
  <span class="org-table">| </span><span class="org-table"><span class="org-code">sub_{scripted}ed</span></span><span class="org-table">                   | sub_{scripted}ed |</span>

  * Markup can span across multiple lines, by default no more than 2.
  * In general, markup cannot be &#8216;in the middle&#8217; of a word.
+ New lines demarcate paragraphs
+ Use <span class="org-verbatim">\\</span> to force line breaks without starting a new paragraph
+ Use <span class="italic">at least</span> 5 dashes, <span class="org-verbatim">-----</span>, to form a horizontal rule

<span class="bold">Export</span> In Emacs, press <span class="org-link"><a href="kbd:C-c_C-e_h_o">kbd:C-c_C-e_h_o</a></span> to obtain an HTML format of the Org-mode
markup; use <span class="org-link"><a href="kbd:C-c_C-e_l_o">kbd:C-c_C-e_l_o</a></span> to obtain a PDF rendition.

<span class="bold">Working with tables</span>
#+BEGIN_SRC org
#+ATTR_HTML: :width 100%
#+name: my-tbl
#+caption: Example table
<span class="org-table">| Who? | What? |</span>
<span class="org-table">|------+-------|</span>
<span class="org-table">| me   | Emacs |</span>
<span class="org-table">| you  | Org   |</span>
#+END_SRC

Note the horizontal rule makes a header row and <span class="writegood-passive-voice">is formed</span> by typing <span class="org-link"><a href="kbd:doit">| -</a></span> then
pressing <span class="org-link"><a href="kbd:TAB">kbd:TAB</a></span>. You can <span class="org-link"><a href="kbd:TAB">kbd:TAB</a></span> between cells.

<span class="bold">Working with links</span>

Link syntax is <span class="org-link"><span class="org-verbatim"><a href="source url">[[source url][description]]</a></span></span>; e.g., we can refer to the above
table with <span class="org-link"><span class="org-verbatim"><a href="my-tbl">[[my-tbl][woah]]</a></span></span>.
Likewise for images: <span class="org-link"><span class="org-verbatim"><a href="file:path-to-image">file:path-to-image</a></span></span><span class="org-verbatim">.</span>

# The HTML has Up/Home on the right now <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/1f609.png" alt=";-)" />
# +HTML_LINK_HOME: <span class="org-link"><a href="http://www.google.com">http://www.google.com</a></span>
# +HTML_LINK_UP: <span class="org-link"><a href="http://www.bing.com">http://www.bing.com</a></span>

<span class="bold">Source code</span>
#+begin_src org -n
,#+begin_src C
int tot = 1;                    (ref:start)
for (int i = 0; i != 10; i++)   (ref:loop)
   tot *= i;                    (ref:next)
printf("The factorial of 10 is %d", tot);
,#+end_src
#+end_src

The labels <span class="org-verbatim">(ref:name)</span> refer to the lines in the source code and can <span class="writegood-passive-voice">be
referenced</span> with link syntax: <span class="org-link"><span class="org-code"><a href="(name)">[[(name)]]</a></span></span>. Hovering over the link, in the HTML
export, will dynamically highlight the corresponding line of code.  To strip-out
the labels from the displayed block, use <span class="org-code">-r -n</span> in the header so it becomes
<span class="org-verbatim">#+begin_src C -r -n</span>, now the references become line numbers.

Another reason to use Org:
If you use <span class="org-verbatim">:results raw</span>, you obtain <span class="bold">dynamic templates</span> that may use Org-markup:
#+BEGIN_SRC C :results raw replace
<span class="flyspell-duplicate">printf</span>("<span class="bold">bold</span> <span class="custom-14">%d</span> (strikethrough) <span class="italic">slanted</span>", 12345);
#+END_SRC

#+RESULTS:
<span class="bold">bold</span> <span class="custom-14">12345</span> (strikethrough) <span class="italic">slanted</span>
<span class="bold">bold</span> <span class="custom-14">12345</span> (strikethrough) <span class="italic">slanted</span>

Also: Notice that a C program can <span class="writegood-passive-voice">be run</span> without a <span class="org-verbatim">main</span> <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/1f609.png" alt=";-)" />

<span class="bold">Mathematics</span>

#+BEGIN_SRC org<span class="org-latex-and-related">
$\sin^2 x + \cos^2 x = \int_\pi^{\pi + 1} 1 </span><span class="org-latex-and-related"><span class="flyspell-duplicate">dx</span></span><span class="org-latex-and-related"> = {3 \over 3}$
</span>#+END_SRC
<span class="org-latex-and-related">\[ &#8658; \quad \sin^2 x + \cos^2 x = \int_\pi^{\pi + 1} 1 </span><span class="org-latex-and-related"><span class="flyspell-duplicate">dx</span></span><span class="org-latex-and-related"> = {3 \over 3} \]</span>

- Instead of <span class="org-verbatim">$</span>, use <span class="org-code">\[...\]</span> to display a formula on its own line, centred.
- Captioned equations <span class="writegood-passive-voice">are numbered</span> and can <span class="writegood-passive-voice">be referenced</span> via links

#+BEGIN_SRC org
#+name: euler
<span class="org-latex-and-related">\begin{equation}
e ^ {i \pi} + 1 = 0
\end{equation}</span>

See equation <span class="org-link"><span class="org-verbatim"><a href="euler">[[euler]]</a></span></span>.
#+END_SRC
&#8658;
#+name: euler
<span class="org-latex-and-related">\begin{equation}
e ^ {i \pi} + 1 = 0
\end{equation}</span>

See equation <span class="org-link"><a href="euler">euler</a></span>.

<span class="org-block-end-line">#+end_details
</span>
<span class="org-level-1">* Using </span><span class="org-link"><a href="https://github.com/bastibe/org-static-blog">org-static-block</a></span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;initial-setup&gt;&gt;</span>

Let's use <span class="org-link"><a href="https://github.com/bastibe/org-static-blog">org-static-block</a></span> to make our blog. Why?
- It's a Lisp program smaller than 900 lines, its source is <span class="writegood-weasels">easy</span> to read and
  understand, and, most importantly, it was super <span class="writegood-weasels">easy</span> to get started using it
  using the <span class="org-link"><a href="https://github.com/bastibe/org-static-blog#examples">given example</a></span>.

Let's declare the necessary basic facts of our blog.
<span class="org-block-begin-line">  #+begin_src emacs-lisp -n :exports code
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-publish-title</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"Life &amp; Computing Science"</span></span><span class="org-block">)
(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-publish-url</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"<a href="https://alhassy.github.io/">https://alhassy.github.io/</a>"</span></span><span class="org-block">)
(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-publish-directory</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/blog/"</span></span><span class="org-block">)
(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-posts-directory</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/blog/posts/"</span></span><span class="org-block">)
(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-drafts-directory</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/blog/drafts/"</span></span><span class="org-block">)

</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Use &#8220;#+filetags: &#964;&#8321; &#964;&#8322; &#8230; &#964;&#8345;&#8221;
</span></span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-enable-tags</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">t</span></span><span class="org-block">)

</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">I'd like to have tocs and numbered headings
</span></span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-export-with-toc</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">t</span></span><span class="org-block">)
(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-export-with-section-numbers</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">t</span></span><span class="org-block">)
</span><span class="org-block-end-line">#+end_src
</span>
<span class="org-level-1">* HTML Header</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;the-html-header&gt;&gt;</span>

What do we want to <span class="writegood-passive-voice">be inserted</span> into the head of every page?

Firstly, we want <span class="writegood-weasels">some</span> styling rules to <span class="writegood-passive-voice">be loaded</span>.
<span class="org-block-begin-line">#+begin_src emacs-lisp -r -n :noweb-ref my-html-header :tangle no
</span><span class="org-block">(</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
</span><span class="org-block"><span class="string">"&lt;meta name=\"author\" content=\"Musa Al-hassy ??? \"&gt;
 &lt;meta name=\"referrer\" content=\"no-referrer\"&gt;"</span></span><span class="org-block">
</span><span class="org-block"><span class="string">"&lt;link href=\"usual-org-front-matter.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span><span class="org-block"> (ref:usualCSS)
</span><span class="org-block"><span class="string">"&lt;link href=\"org-notes-style.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span><span class="org-block"> (ref:orgNotesCSS)
</span><span class="org-block"><span class="string">"&lt;link href=\"floating-toc.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span><span class="org-block"> (ref:tocCSS)
</span><span class="org-block"><span class="string">"&lt;link href=\"blog-banner.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span><span class="org-block"> (ref:bannerCSS)
</span><span class="org-block"><span class="string">"&lt;link rel=\"icon\" href=\"images/favicon.png\"&gt;"</span></span><span class="org-block">)
</span><span class="org-block-end-line">#+end_src
</span>
+ <span class="org-link"><span class="org-list-dt"><a href="(usualCSS)">usual-org-front-matter.css</a></span></span><span class="org-list-dt"> </span><span class="org-link"><span class="org-list-dt"><a href="badge:||success|usual-org-front-matter.css|css3">badge:||success|usual-org-front-matter.css|css3</a></span></span><span class="org-list-dt"> ::</span>
  Org-static-blog ignores any styling exported by Org, so let's bring that back
  in. I just exported this file with the usual <span class="org-link"><a href="kbd:C-c_C-e_h_o">kbd:C-c_C-e_h_o</a></span>, then saved the CSS
  it produced.

+ <span class="org-link"><span class="org-list-dt"><a href="(orgNotesCSS)">org-notes-style.css</a></span></span><span class="org-list-dt"> </span><span class="org-link"><span class="org-list-dt"><a href="badge:||success|org-notes-style.css|css3">badge:||success|org-notes-style.css|css3</a></span></span><span class="org-list-dt"> ::</span>

  I like the rose-style of this <span class="org-link"><a href="http://taopeng.me/org-notes-style/">org-notes-style</a></span> for HTML export.  However, it
  seems loading the CSS directly from its homepage does not work, so I've copied
  the CSS file for my blog.

+ <span class="org-link"><span class="org-list-dt"><a href="(tocCSS)">floating-toc.css</a></span></span><span class="org-list-dt"> </span><span class="org-link"><span class="org-list-dt"><a href="badge:||success|floating-toc.css|css3">badge:||success|floating-toc.css|css3</a></span></span><span class="org-list-dt"> ::</span>

  I want to have an unobtrusive floating table of contents, see
  &#167;<span class="org-link"><a href="floating-toc">floating-toc</a></span>.

+ <span class="org-link"><span class="org-list-dt"><a href="(bannerCSS)">blog-banner.css</a></span></span><span class="org-list-dt"> </span><span class="org-link"><span class="org-list-dt"><a href="badge:||success|blog-banner.css|css3">badge:||success|blog-banner.css|css3</a></span></span><span class="org-list-dt"> ::</span>

  Finally, we want a beautiful welcome mat, see &#167;<span class="org-link"><a href="blog-banner">blog-banner</a></span>.

In addition, we have two more pieces we would like to add to the header: Support
for <span class="italic">dynamic</span> code-line highlighting, &#167;<span class="org-link"><a href="blog-banner">blog-banner</a></span>, and support for using
LaTeX-style notation to write mathematics, &#167;<span class="org-link"><a href="MathJax-Support">MathJax-Support</a></span>.  We will use a
<span class="org-link"><a href="https://github.com/alhassy/emacs.d#what-does-literate-programming-look-like">noweb-ref</a></span> named <span class="org-verbatim">my-html-header</span> to refer to them, which are then catenated below.
<span class="org-block-begin-line">#+begin_src emacs-lisp :noweb yes :results raw -n
</span><span class="org-block"> (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-page-header</span></span><span class="org-block">
  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
   </span><span class="org-block"><span class="highlight-defined-variable-name">org-html-head-extra</span></span><span class="org-block">  </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Alterd by &#8216;</span></span><span class="org-block"><span class="comment"><span class="constant">org-special-block-extras</span></span></span><span class="org-block"><span class="comment">&#8217;
</span></span><span class="org-block">   &lt;&lt;my-html-header&gt;&gt;
   ))
</span><span class="org-block-end-line">#+end_src
</span><span class="comment"># Using &#8220;html-header&#8221; as the noweb-ref caused the entirrity of the source</span>
<span class="comment"># block, along with the #+begin&#8230;#+end to </span><span class="comment"><span class="writegood-passive-voice">be included</span></span><span class="comment">.</span>

<span class="org-block-begin-line">#+begin_edcomm
</span><span class="org-special-keyword">:ed:</span> <span class="org-property-value">Warning</span>

The <span class="flyspell-duplicate">noweb</span>-ref invocation <span class="org-verbatim">l </span><span class="org-target"><span class="org-verbatim">&lt;&lt;&#120013;&#120008;&gt;&gt;</span></span><span class="org-verbatim"> r</span> expands into
#+begin_src emacs-lisp :tangle no :<span class="flyspell-duplicate">noeval</span>
l &#120013;&#8320; r
l &#120013;&#8321; r
  &#8942;
l &#120013;&#8345; r
#+end_src
Where the <span class="org-verbatim">&#120013;&#7522;</span> are the lines referenced by <span class="org-verbatim">&#120013;&#120008;</span>.

<span class="bold">As such, we had our reference call, above, in its own line!</span>
<span class="org-block-end-line">#+end_edcomm
</span>
<span class="org-level-1">* Blog Banner and Dynamic Code Highlighting</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;blog-banner&gt;&gt;</span>

I want to have a nice banner at the top of every page, which should link
to useful parts of my blog.
<span class="org-block-begin-line">#+begin_src emacs-lisp -n
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-page-preamble</span></span><span class="org-block">
</span><span class="org-block"><span class="string">"&lt;div class=\"header\"&gt;
  &lt;a href=\"<a href="https://alhassy.github.io/">https://alhassy.github.io/</a>\" class=\"logo\"&gt;Life &amp; Computing Science&lt;/a&gt;
  &lt;br&gt;
    &lt;a href=\"<a href="https://alhassy.github.io/AlBasmala">https://alhassy.github.io/AlBasmala</a>\"&gt;AlBasmala&lt;/a&gt;
    &lt;a href=\"<a href="https://alhassy.github.io/archive">https://alhassy.github.io/archive</a>\"&gt;Archive&lt;/a&gt;
    &lt;a href=\"<a href="https://alhassy.github.io/tags">https://alhassy.github.io/tags</a>\"&gt;Tags&lt;/a&gt;
    &lt;a href=\"<a href="https://alhassy.github.io/rss.xml">https://alhassy.github.io/rss.xml</a>\"&gt;RSS&lt;/a&gt;
    &lt;a href=\"<a href="https://alhassy.github.io/about">https://alhassy.github.io/about</a>\"&gt;About&lt;/a&gt;
&lt;/div&gt;"</span></span><span class="org-block">)
</span><span class="org-block-end-line">#+end_src
</span>
Note that we could have been needlessly more generic by using, say,
<span class="org-verbatim">(org-static-blog-get-absolute-url org-static-blog-rss-file)</span>,
instead of hardcoding the links.
<span class="org-drawer">:Also:...
</span>
I want to style it as follows:

+ Line <span class="org-link"><a href="(headerHeader)">(headerHeader)</a></span>: The banner is in a box at the top with <span class="writegood-weasels">some</span> shadowing and
  centred text using the <span class="org-verbatim">fantasy</span> font
+ Line <span class="org-link"><a href="(headerLogo)">(headerLogo)</a></span>: The blog's title is large and bold
+ Line <span class="org-link"><a href="(headerAnchor)">(headerAnchor)</a></span>: All links in the banner are black
+ Line <span class="org-link"><a href="(headerHover)">(headerHover)</a></span>: When you hover over a link, it becomes blue

<span class="org-block-begin-line">#+begin_src css -r -n :tangle ~/blog/blog-banner.css :noeval -n
</span><span class="org-block"><span class="css-selector">.header </span></span><span class="org-block">{ (ref:headerHeader)
  </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">Try to load &#8216;fantasy&#8217; if possible, else try to load the others. </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
  </span><span class="org-block"><span class="css-property">font-family</span></span><span class="org-block">: fantasy, monospace, Times;
  </span><span class="org-block"><span class="css-property">text-align</span></span><span class="org-block">: center;
  </span><span class="org-block"><span class="css-property">overflow</span></span><span class="org-block">: hidden;
  </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">background-color: #f1f1f1 !important; </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
  </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">background: #4183c4 !important; </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
  </span><span class="org-block"><span class="css-property">padding-top</span></span><span class="org-block">: 10px;
  </span><span class="org-block"><span class="css-property">padding-bottom</span></span><span class="org-block">: 10px;
  </span><span class="org-block"><span class="css-property">box-shadow</span></span><span class="org-block">: 0 2px 10px 2px </span><span class="org-block"><span class="custom-13">rgba(0, 0, 0, 0.2)</span></span><span class="org-block">;
}

</span><span class="org-block"><span class="css-selector">.header a.logo </span></span><span class="org-block">{ (ref:headerLogo)
  </span><span class="org-block"><span class="css-property">font-size</span></span><span class="org-block">: 50px;
  </span><span class="org-block"><span class="css-property">font-weight</span></span><span class="org-block">: bold;
}

</span><span class="org-block"><span class="css-selector">.header a </span></span><span class="org-block">{ (ref:headerAnchor)
  </span><span class="org-block"><span class="css-property">color</span></span><span class="org-block">: </span><span class="org-block"><span class="custom-13">black</span></span><span class="org-block">;
  </span><span class="org-block"><span class="css-property">padding</span></span><span class="org-block">: 12px;
  </span><span class="org-block"><span class="css-property">text-decoration</span></span><span class="org-block">: none;
  </span><span class="org-block"><span class="css-property">font-size</span></span><span class="org-block">: 18px;
}

</span><span class="org-block"><span class="css-selector">.header a:hover </span></span><span class="org-block">{ (ref:headerHover)
  </span><span class="org-block"><span class="css-property">background-color</span></span><span class="org-block">: </span><span class="org-block"><span class="custom-12">#ddd</span></span><span class="org-block">;
  </span><span class="org-block"><span class="css-property">background-color</span></span><span class="org-block">: </span><span class="org-block"><span class="custom-11">#fff</span></span><span class="org-block">;
  </span><span class="org-block"><span class="css-property">color</span></span><span class="org-block">: </span><span class="org-block"><span class="custom-10">#4183c4</span></span><span class="org-block">;
}
</span><span class="org-block-end-line">#+end_src
</span>
Notice that as you hover over the references, such as <span class="org-link"><a href="(headerLogo)">this</a></span>, <span class="bold">the corresponding
line of code </span><span class="bold"><span class="writegood-passive-voice">is highlighted</span></span><span class="bold">!</span> Within a <span class="org-verbatim">src</span> block, one uses the switches <span class="org-verbatim">-n -r</span>
to enable references via line numbers, then declares <span class="org-code">(ref:name)</span> on line
and refers to it by <span class="org-link"><span class="org-verbatim"><a href="(name)">[[(name)][description]]</a></span></span>. Org-mode by default styles
such highlighting.
<span class="org-block-begin-line">#+begin_details
</span>#+begin_src emacs-lisp :noweb-ref my-html-header :tangle no -n
"&lt;script type=\"text/javascript\"&gt;
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code <span class="writegood-passive-voice">is distributed</span> WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
,*/
&lt;!--<span class="italic">*--&gt;&lt;![</span><span class="italic"><span class="flyspell-incorrect">CDATA</span></span><span class="italic">[/*&gt;&lt;!--*</span>
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = \"code-highlighted\";
     elem.className   = \"code-highlighted\";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.<span class="flyspell-duplicate">cacheClassTarget</span>;
 }
<span class="italic">*]]&gt;*//</span>--&gt;
&lt;/script&gt;"
#+end_src
<span class="org-block-end-line">#+end_details
</span>
<span class="org-block-begin-line">#+begin_edcomm
</span><span class="org-special-keyword">:ed:</span> <span class="org-property-value">Remark</span>
<span class="custom-9"><a href="orange:TODO">orange:TODO</a></span>
Before we move on, I'd like to have heavy red font for links.
#+begin_src css :tangle ~/blog/blog-banner.css :<span class="flyspell-duplicate">noeval</span> :tangle no -n
a {<span class="custom-8"><a href="color:#DD514C;text-decoration:none;font-weight:700">color:#DD514C;text-decoration:none;font-weight:700</a></span>}
#+end_<span class="flyspell-duplicate">src</span>
But this causes the table of contents to <span class="writegood-passive-voice">be red</span>, which I dislike &#4314;(&#3232;&#30410;&#3232;)&#4314;
<span class="org-block-end-line">#+end_edcomm
</span>
<span class="org-level-1">*</span><span class="org-level-1"><span class="org-latex-and-related"> $e^{i \</span></span><span class="org-level-1"><span class="org-latex-and-related"><span class="flyspell-incorrect">cdot</span></span></span><span class="org-level-1"><span class="org-latex-and-related"> \pi} + 1 = 0$ </span></span><span class="org-level-1">---</span><span class="org-level-1"><span class="flyspell-duplicate">MathJax</span></span><span class="org-level-1"> Support</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;</span><span class="org-target"><span class="flyspell-duplicate">MathJax</span></span><span class="org-target">-Support&gt;&gt;</span>

Org loads the <span class="org-link"><a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">MathJax</a></span> display engine for mathematics whenever users
write LaTeX-style <span class="flyspell-duplicate">math</span> delimited by <span class="org-code">$...$</span> or by <span class="org-verbatim">\[...\]</span>. Here is an example.

<span class="org-block-begin-line">#+begin_details org
</span><span class="org-block">This is the CSS that Org loads by default.
</span><span class="org-block"><span class="org-block-begin-line">#+begin_src emacs-lisp :noweb-ref my-html-header :tangle no -n
</span></span><span class="org-block"><span class="org-block"><span class="string">"&lt;script type=\"text/x-mathjax-config\"&gt;
    MathJax.Hub.Config({
        displayAlign: \"center\",
        displayIndent: \"0em\",

        \"HTML-CSS\": { scale: 100,
                        linebreaks: { automatic: \"false\" },
                        webFont: \"TeX\"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: \"false\" },
              font: \"TeX\"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: \"AMS\"},
               MultLineWidth: \"85%\",
               TagSide: \"right\",
               TagIndent: \".8em\"
             }
});
&lt;/script&gt;
&lt;script type=\"text/javascript\"
        src=\"<a href="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML">https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML</a>\"&gt;&lt;/script&gt;
"</span></span></span><span class="org-block"><span class="org-block">
</span></span><span class="org-block"><span class="org-block-end-line">#+end_src
</span></span><span class="org-block-end-line">#+end_details
</span>
<span class="org-latex-and-related">\[ p &#8851; q = p \quad &#8801; \quad p &#8852; q = q \label{Golden-Rule}\tag{Golden-Rule}\]</span>

Look at \ref{Golden-Rule}, it says, when specialised to numbers, <span class="italic">the minimum
of two items is the first precisely when the maximum of the two is the second</span>
---<span class="flyspell-incorrect">d'uh</span>!

<span class="org-block-begin-line">#+begin_edcomm
</span><span class="org-special-keyword">:ed:</span> <span class="org-property-value">Warning</span>

We can make an equation &#8496; named &#119977; and refer to it by &#8466; by declaring
<span class="org-verbatim">\[&#8496; \tag{&#119977;} \label{&#8466;} \]</span> then refer to it with <span class="org-verbatim">\ref{&#8466;}</span>.  However, if &#119977; contains
Unicode, then the reference will not generally be &#8216;clickable&#8217; ---it wont take
you to the equation's declaration site.  For example, \ref{&#8849;-Definition} below
has Unicode in both its tag and label, and so clicking that link wont go
anywhere, whereas \ref{Order-Definition} has Unicode only in its tag, with the
label being <span class="org-verbatim">\label{Order-Definition}</span>, and clicking it takes you to the formula.

<span class="org-latex-and-related">\[ p &#8849; q \quad &#8801; \quad p &#8851; q = p \tag{&#8849;-Definition}\label{&#8849;-Definition} \]</span>
<span class="org-latex-and-related">\[ p &#8849; q \quad &#8801; \quad p &#8852; q = q \tag{&#8849;-Definition}\label{Order-Definition} \]</span>

<span class="org-block-end-line">#+end_edcomm
</span>
The following rule for anchors <span class="org-verbatim">a {&#8943;}</span> resurrects <span class="org-verbatim">\ref{}</span> calls via <span class="flyspell-duplicate">MathJax</span>
---which <span class="org-verbatim">org-notes-style</span> kills.
<span class="org-block-begin-line">#+begin_src css :tangle ~/blog/blog-banner.css :noeval
</span><span class="org-block"><span class="css-selector">a </span></span><span class="org-block">{ </span><span class="org-block"><span class="css-property">white-space</span></span><span class="org-block">: pre </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">; }
</span><span class="org-block-end-line">#+end_src
</span>
<span class="org-level-1">* &#926;: Floating </span><span class="org-level-1"><span class="italic">Table of Contents</span></span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;floating-</span><span class="org-target"><span class="flyspell-duplicate">toc</span></span><span class="org-target">&gt;&gt;</span>

I would like to have a table of contents that floats so that it is accessible to
the reader in case they want to jump elsewhere in the document quickly
---possibly going to the top of the document.

When we write <span class="org-verbatim">#+toc: headlines 2</span> in our Org, HTML export produces the following.
<span class="org-block-begin-line">#+begin_src html -n  :exports code :tangle no :noeval
</span><span class="org-block">&lt;</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">id</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"table-of-contents"</span></span><span class="org-block">&gt;
  &lt;</span><span class="org-block"><span class="custom-6">h2</span></span><span class="org-block">&gt;</span><span class="org-block"><span class="underline"><span class="bold-italic">Table of Contents</span></span></span><span class="org-block">&lt;/</span><span class="org-block"><span class="custom-6">h2</span></span><span class="org-block">&gt;
  &lt;</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">id</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"text-table-of-contents"</span></span><span class="org-block">&gt;
    &lt;</span><span class="org-block"><span class="custom-5">ul</span></span><span class="org-block">&gt;
      &lt;</span><span class="org-block"><span class="custom-4">li</span></span><span class="org-block">&gt; section 1 &lt;/</span><span class="org-block"><span class="custom-4">li</span></span><span class="org-block">&gt;
             &#8942;
      &lt;</span><span class="org-block"><span class="custom-4">li</span></span><span class="org-block">&gt; section &#120003; &lt;/</span><span class="org-block"><span class="custom-4">li</span></span><span class="org-block">&gt;
    &lt;/</span><span class="org-block"><span class="custom-5">ul</span></span><span class="org-block">&gt;
  &lt;/</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block">&gt;
&lt;/</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block">&gt;
</span><span class="org-block-end-line">#+end_src
</span>Hence, we can style the table of contents by writing rules that target those
<span class="org-verbatim">id</span>'s. We use the following rules, adapted from <span class="org-link"><a href="https://orgmode.org/worg/">the Worg community</a></span>.
<span class="org-block-begin-line">#+begin_src css -n  :tangle ~/blog/floating-toc.css :noeval
</span><span class="org-block"><span class="comment-delimiter">/*</span></span><span class="org-block"><span class="comment">TOC inspired by <a href="https://orgmode.org/worg/">https://orgmode.org/worg/</a> </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
</span><span class="org-block"><span class="css-selector">#table-of-contents </span></span><span class="org-block">{
    </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">Place the toc in the top right corner </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
    </span><span class="org-block"><span class="css-property">position</span></span><span class="org-block">: fixed; </span><span class="org-block"><span class="css-property">right</span></span><span class="org-block">: 0em; </span><span class="org-block"><span class="css-property">top</span></span><span class="org-block">: 0em;
    </span><span class="org-block"><span class="css-property">margin-top</span></span><span class="org-block">: 120px; </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">offset from the top of the screen </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">

    </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">It shrinks and grows as necessary </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
    </span><span class="org-block"><span class="css-property">padding</span></span><span class="org-block">: 0em </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;
    </span><span class="org-block"><span class="css-property">width</span></span><span class="org-block">: auto </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;
    </span><span class="org-block"><span class="css-property">min-width</span></span><span class="org-block">: auto </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;

    </span><span class="org-block"><span class="css-property">font-size</span></span><span class="org-block">: 10pt;
    </span><span class="org-block"><span class="css-property">background</span></span><span class="org-block">: </span><span class="org-block"><span class="custom-3">white</span></span><span class="org-block">;
    </span><span class="org-block"><span class="css-property">line-height</span></span><span class="org-block">: 12pt;
    </span><span class="org-block"><span class="css-property">text-align</span></span><span class="org-block">: right;

    </span><span class="org-block"><span class="css-property">box-shadow</span></span><span class="org-block">: </span><span class="org-block"><span class="writegood-duplicates">0 0</span></span><span class="org-block"> 1em </span><span class="org-block"><span class="custom-2">#777777</span></span><span class="org-block">;
    </span><span class="org-block"><span class="css-proprietary-property">-webkit-box-shadow</span></span><span class="org-block">: </span><span class="org-block"><span class="writegood-duplicates">0 0</span></span><span class="org-block"> 1em </span><span class="org-block"><span class="custom-2">#777777</span></span><span class="org-block">;
    </span><span class="org-block"><span class="css-proprietary-property">-moz-box-shadow</span></span><span class="org-block">: </span><span class="org-block"><span class="writegood-duplicates">0 0</span></span><span class="org-block"> 1em </span><span class="org-block"><span class="custom-2">#777777</span></span><span class="org-block">;
    </span><span class="org-block"><span class="css-proprietary-property">-webkit-border-bottom-left-radius</span></span><span class="org-block">: 5px;
    </span><span class="org-block"><span class="css-proprietary-property">-moz-border-radius-bottomleft</span></span><span class="org-block">: 5px;

    </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">Ensure doesn't flow off the screen when expanded </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
    </span><span class="org-block"><span class="css-property">max-height</span></span><span class="org-block">: 80%;
    </span><span class="org-block"><span class="css-property">overflow</span></span><span class="org-block">: auto;}

</span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">How big is the text &#8220;Table of Contents&#8221; and space around it </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
</span><span class="org-block"><span class="css-selector">#table-of-contents h2 </span></span><span class="org-block">{
    </span><span class="org-block"><span class="css-property">font-size</span></span><span class="org-block">: 13pt;
    </span><span class="org-block"><span class="css-property">max-width</span></span><span class="org-block">: 9em;
    </span><span class="org-block"><span class="css-property">border</span></span><span class="org-block">: 0;
    </span><span class="org-block"><span class="css-property">font-weight</span></span><span class="org-block">: normal;
    </span><span class="org-block"><span class="css-property">padding-left</span></span><span class="org-block">: 0.5em;
    </span><span class="org-block"><span class="css-property">padding-right</span></span><span class="org-block">: 0.5em;
    </span><span class="org-block"><span class="css-property">padding-top</span></span><span class="org-block">: 0.05em;
    </span><span class="org-block"><span class="css-property">padding-bottom</span></span><span class="org-block">: 0.05em; }

</span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">Intially have the TOC folded up; show it if the mouse hovers it </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
</span><span class="org-block"><span class="css-selector">#table-of-contents #text-table-of-contents </span></span><span class="org-block">{
    </span><span class="org-block"><span class="css-property">display</span></span><span class="org-block">: none;
    </span><span class="org-block"><span class="css-property">text-align</span></span><span class="org-block">: left; }

</span><span class="org-block"><span class="css-selector">#table-of-contents:hover #text-table-of-contents </span></span><span class="org-block">{
    </span><span class="org-block"><span class="css-property">display</span></span><span class="org-block">: block;
    </span><span class="org-block"><span class="css-property">padding</span></span><span class="org-block">: 0.5em;
    </span><span class="org-block"><span class="css-property">margin-top</span></span><span class="org-block">: -1.5em; }
</span><span class="org-block-end-line">#+end_src
</span>
<span class="comment"># * TOC entries, unnumbered lists, should not </span><span class="comment"><span class="writegood-passive-voice">be indented</span></span><span class="comment"> too much *</span>
<span class="comment"># #text-table-of-contents ul { padding-left: 20px }</span>

<span class="org-block-begin-line">#+begin_edcomm org
</span><span class="org-block"><span class="org-special-keyword">:ed:</span></span><span class="org-block"> </span><span class="org-block"><span class="org-property-value">Strange</span></span><span class="org-block">
If I zoom in over 100% in my browser, the </span><span class="org-block"><span class="flyspell-duplicate">toc</span></span><span class="org-block"> disappears until I zoom out.
</span><span class="org-block-end-line">#+end_edcomm
</span>
Since the table of contents floats, the phrase <span class="italic">Table of Contents</span> is rather
&#8216;in your face&#8217;, so let's use the more subtle Greek <span class="org-link"><a href="https://en.wikipedia.org/wiki/Xi_(letter)">letter</a></span> <span class="org-verbatim">&#926;</span>.
<span class="org-block-begin-line">#+begin_src emacs-lisp -n
</span><span class="org-block">(</span><span class="org-block"><span class="highlight-defined-function-name">advice-add</span></span><span class="org-block"> '</span><span class="org-block"><span class="highlight-defined-function-name">org-html--translate</span></span><span class="org-block"> </span><span class="org-block"><span class="builtin">:before-until</span></span><span class="org-block"> '</span><span class="org-block"><span class="highlight-defined-function-name">display-toc-as-&#926;</span></span><span class="org-block">)

</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(advice-remove 'org-html--translate 'display-toc-as-&#926;)
</span></span><span class="org-block">
(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">display-toc-as-&#926;</span></span><span class="org-block"> (phrase </span><span class="org-block"><span class="highlight-defined-function-name">info</span></span><span class="org-block">)
  (</span><span class="org-block"><span class="keyword">when</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">equal</span></span><span class="org-block"> phrase </span><span class="org-block"><span class="string">"Table of Contents"</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="highlight-defined-function-name">s-collapse-whitespace</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"&lt;a href=\"javascript:window.scrollTo(0,0)\"
        style=\"color: black !important; border-bottom: none !important;\"
        class=\"tooltip\"
        title=\"Go to the top of the page\"&gt;
      &#926;
    &lt;/a&gt;"</span></span><span class="org-block">)))
</span><span class="org-block-end-line">#+end_src
</span>
How did I get here?
1. How does Org's HTML export TOCs? &#8658; <span class="org-link"><a href="doc:org-html-toc">doc:org-html-toc</a></span>
2. Looking at its source, we see <span class="org-link"><a href="doc:org-html--translate">doc:org-html--translate</a></span> being
   the only place mentioning the string <span class="italic">Table of Contents</span>
3. Let's advise it, with <span class="org-link"><a href="doc:advice-add">doc:advice-add</a></span>, to return <span class="italic">&#926;</span>
   <span class="italic">only</span> on that particular input string.
4. Joy <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/2665.png" alt="&#9829;" />&#8255;<img src="../../.emacs.d/emojis/emojione-v2.2.6-22/2665.png" alt="&#9829;" />

<span class="org-level-1">* HTML Footer: Comments</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;Comments&gt;&gt;</span>

At the bottom of every page, let's have a licensing stub
and a <span class="org-link"><a href="https://disqus.com/">Disqus</a></span>-powered comments section.
<span class="org-block-begin-line">#+begin_src emacs-lisp -n
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-page-postamble</span></span><span class="org-block">
(</span><span class="org-block"><span class="highlight-defined-function-name">s-collapse-whitespace</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">s-replace</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"\n"</span></span><span class="org-block"> </span><span class="org-block"><span class="string">""</span></span><span class="org-block">
</span><span class="org-block"><span class="string">"
&lt;center&gt;
  &lt;a rel=\"license\" href=\"<a href="https://creativecommons.org/licenses/by-sa/3.0/">https://creativecommons.org/licenses/by-sa/3.0/</a>\"&gt;
     &lt;img alt=\"Creative Commons License\" style=\"border-width:0\"
          src=\"<a href="https://i.creativecommons.org/l/by-sa/3.0/88x31.png\&quot;/">https://i.creativecommons.org/l/by-sa/3.0/88x31.png\"/</a>&gt;
  &lt;/a&gt;

  &lt;br/&gt;
  &lt;span xmlns:dct=\"<a href="https://purl.org/dc/terms/">https://purl.org/dc/terms/</a>\"
        href=\"<a href="https://purl.org/dc/dcmitype/Text">https://purl.org/dc/dcmitype/Text</a>\"
        property=\"dct:title\" rel=\"dct:type\"&gt;
     &lt;em&gt;Life &amp; Computing Science&lt;/em&gt;
  &lt;/span&gt;

  by
  &lt;a xmlns:cc=\"<a href="https://creativecommons.org/ns">https://creativecommons.org/ns</a>#\"
  href=\"<a href="https://alhassy.github.io/">https://alhassy.github.io/</a>\"
  property=\"cc:attributionName\" rel=\"cc:attributionURL\"&gt;
    Musa Al-hassy
  &lt;/a&gt;

  </span></span><span class="org-block"><span class="string"><span class="writegood-passive-voice">is licensed</span></span></span><span class="org-block"><span class="string"> under a
  &lt;a rel=\"license\" href=\"<a href="https://creativecommons.org/licenses/by-sa/3.0/">https://creativecommons.org/licenses/by-sa/3.0/</a>\"&gt;
    Creative Commons Attribution-ShareAlike 3.0 Unported License.
  &lt;/a&gt;
&lt;/center&gt;

&lt;div id=\"disqus_thread\"&gt;&lt;/div&gt;
&lt;script type=\"text/javascript\"&gt;
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'life-and-computing-science';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
&lt;/script&gt;
&lt;noscript&gt;Please enable JavaScript to view the
    &lt;a href=\"<a href="http://disqus.com/?ref_noscript">http://disqus.com/?ref_noscript</a>\"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;
&lt;a href=\"<a href="http://disqus.com">http://disqus.com</a>\" class=\"dsq-brlink\"&gt;comments powered by &lt;span class=\"logo-disqus\"&gt;Disqus&lt;/span&gt;&lt;/a&gt;"</span></span><span class="org-block">)))
</span><span class="org-block-end-line">#+end_src
</span>
<span class="org-level-1">* Article Headers &amp; Images</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;Images&gt;&gt;</span>

Every article declaratively has an associated image ^_^
- If none declared, we use <span class="org-verbatim">emacs-birthday-present.png</span> <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/1f642.png" alt=":-)" />
- Images <span class="writegood-passive-voice">are loaded</span> from the <span class="org-verbatim">~/blog/images/</span> directory.

<span class="org-block-begin-line">#+begin_src emacs-lisp -n
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">cl-defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">my/org-static-blog-assemble-image</span></span><span class="org-block"> (file)
</span><span class="org-block"><span class="doc">"Assemble the value of &#8216;#+fileimage: image width height border?&#8217; as an HTML form."</span></span><span class="org-block">
(</span><span class="org-block"><span class="keyword">with-temp-buffer</span></span><span class="org-block">
  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">insert-file-contents</span></span><span class="org-block"> file)
  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">goto-char</span></span><span class="org-block"> 0)
  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">search-forward-regexp</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"^\\#\\+fileimage: </span></span><span class="org-block"><span class="string"><span class="regexp-grouping-backslash">\\</span></span></span><span class="org-block"><span class="string"><span class="regexp-grouping-construct">(</span></span></span><span class="org-block"><span class="string">.*</span></span><span class="org-block"><span class="string"><span class="regexp-grouping-backslash">\\</span></span></span><span class="org-block"><span class="string"><span class="regexp-grouping-construct">)</span></span></span><span class="org-block"><span class="string">"</span></span><span class="org-block"> nil </span><span class="org-block"><span class="highlight-defined-variable-name">t</span></span><span class="org-block">)
  (</span><span class="org-block"><span class="keyword">-let</span></span><span class="org-block"> [(image width height no-border?)
         (</span><span class="org-block"><span class="highlight-defined-function-name">s-split</span></span><span class="org-block"> </span><span class="org-block"><span class="string">" "</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">substring-no-properties</span></span><span class="org-block">
                       (</span><span class="org-block"><span class="keyword">or</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">match-string</span></span><span class="org-block"> 1)
                           </span><span class="org-block"><span class="string">"emacs-birthday-present.png"</span></span><span class="org-block">)))]
    (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> width (</span><span class="org-block"><span class="keyword">or</span></span><span class="org-block"> width 350))
    (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> height (</span><span class="org-block"><span class="keyword">or</span></span><span class="org-block"> height 350))
    (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> no-border? (</span><span class="org-block"><span class="keyword">if</span></span><span class="org-block"> no-border? </span><span class="org-block"><span class="string">""</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"style=\"border: 2px solid black;\""</span></span><span class="org-block">))
    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"&lt;center&gt; &lt;img src=\"images/%s\" alt=\"Article image\"
            %s width=\"%s\" height=\"%s\" align=\"top\" /&gt; &lt;/center&gt;"</span></span><span class="org-block">
            image no-border? width height))))
</span><span class="org-block-end-line">#+end_src
</span>
To make use of <span class="org-verbatim">org-notes-style</span>, I need the title to use the <span class="org-verbatim">title</span> class
but <span class="org-verbatim">org-static-blog</span> uses the <span class="org-verbatim">post-title</span> blog, so I'll override the
<span class="org-verbatim">org-static-blog</span> preamble method to <span class="writegood-weasels">simply</span> use an auxiliary div.
- Along the way, I'll position the article image under the article's title.
- Line <span class="org-link"><a href="(fixTitle)">(fixTitle)</a></span>: <span class="org-verbatim">org-notes-style</span> has too much vertical space after the title,
  let's reduce it so that the article's data can follow it smoothly.
<span class="comment"># - Line <a href="(BR)">(BR)</a>: org-static-blog does not support Org-markup in the title, since it</span>
<span class="comment">#  just dumps the title in-place; here I provide a support for just &lt;br&gt;.</span>
<span class="org-block-begin-line">#+begin_src emacs-lisp -r -n -n
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">org-static-blog-post-preamble</span></span><span class="org-block"> (post-filename)
  </span><span class="org-block"><span class="doc">"Returns the formatted date and headline of the post.
This function </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is called</span></span></span><span class="org-block"><span class="doc"> for every post and prepended to the post body.
Modify this function if you want to change a posts headline."</span></span><span class="org-block">
  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">The title
</span></span><span class="org-block">   </span><span class="org-block"><span class="string">"&lt;h1 class=\"post-title\"&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"&lt;div class=\"title\" style=\"margin: </span></span><span class="org-block"><span class="string"><span class="writegood-duplicates">0 0</span></span></span><span class="org-block"><span class="string"> </span></span><span class="org-block"><span class="string"><span class="writegood-duplicates">0 0</span></span></span><span class="org-block"><span class="string"> !important;\"&gt;"</span></span><span class="org-block">  (ref:fixTitle)
   </span><span class="org-block"><span class="string">"&lt;a href=\""</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-get-post-url</span></span><span class="org-block"> post-filename) </span><span class="org-block"><span class="string">"\"&gt;"</span></span><span class="org-block">
   (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-get-title</span></span><span class="org-block"> post-filename)
   </span><span class="org-block"><span class="string">"&lt;/a&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"&lt;/h1&gt;&lt;/div&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Move to the footer? Near the &#8216;</span></span><span class="org-block"><span class="comment"><span class="constant">Tags</span></span></span><span class="org-block"><span class="comment">&#8217; of the article?
</span></span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">The date
</span></span><span class="org-block">   </span><span class="org-block"><span class="string">"&lt;div style=\"text-align: center;\"&gt;"</span></span><span class="org-block">
   (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format-time-string</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-gettext</span></span><span class="org-block"> 'date-format)
                       (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-get-date</span></span><span class="org-block"> post-filename))
   </span><span class="org-block"><span class="string">"&lt;/div&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">The article's image
</span></span><span class="org-block">   (</span><span class="org-block"><span class="highlight-defined-function-name">my/org-static-blog-assemble-image</span></span><span class="org-block"> post-filename)
   </span><span class="org-block"><span class="string">"&lt;br&gt;&lt;center&gt;&lt;strong&gt;Abstract&lt;/strong&gt;&lt;/center&gt;"</span></span><span class="org-block">))
</span><span class="org-block-end-line">#+end_src
</span>

<span class="comment"># Before we move on, Org-notes adds extra whitespace after the title, let's avoid</span>
<span class="comment"># that.</span>
<span class="comment"># #+begin_src css :tangle ~/blog/blog-banner.css :noeval</span>
<span class="comment">#  .title { margin: </span><span class="comment"><span class="writegood-duplicates">0 0</span></span><span class="comment"> </span><span class="comment"><span class="writegood-duplicates">0 0</span></span><span class="comment"> !important; }</span>
<span class="comment"># #+end_src</span>

<span class="org-level-1">* Article Footers</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;footers&gt;&gt;</span>

<span class="org-block-begin-line">#+begin_src emacs-lisp -n
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">org-static-blog-post-postamble</span></span><span class="org-block"> (post-filename)
  </span><span class="org-block"><span class="doc">"Returns the tag list and comment box at the end of a post.
This function </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is called</span></span></span><span class="org-block"><span class="doc"> for every post and the returned string </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is
appended</span></span></span><span class="org-block"><span class="doc"> to the post body, and includes the tag list generated by
followed by the HTML code for comments."</span></span><span class="org-block">
</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Generate an htmlized version of the source file
</span></span><span class="org-block">(</span><span class="org-block"><span class="keyword">let</span></span><span class="org-block"> ((</span><span class="org-block"><span class="highlight-defined-variable-name">org-hide-block-startup</span></span><span class="org-block"> nil))
  (</span><span class="org-block"><span class="keyword">with-temp-buffer</span></span><span class="org-block">
    (</span><span class="org-block"><span class="highlight-defined-function-name">find-file</span></span><span class="org-block"> post-filename)
    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(insert "\n#+HTML_HEAD: &lt;link href=\"../doom-solarized-light.css\" rel=\"stylesheet\"&gt;\n")
</span></span><span class="org-block">    (</span><span class="org-block"><span class="highlight-defined-function-name">org-mode</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="highlight-defined-function-name">outline-show-all</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="highlight-defined-function-name">switch-to-buffer</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">htmlize-buffer</span></span><span class="org-block">))
    (</span><span class="org-block"><span class="highlight-defined-function-name">write-file</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/blog/"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> post-filename) </span><span class="org-block"><span class="string">".org.html"</span></span><span class="org-block">))
    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">kill-buffer</span></span><span class="org-block">)))
  </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Actual bottom matter
</span></span><span class="org-block">  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Tags
</span></span><span class="org-block">   </span><span class="org-block"><span class="string">"&lt;div class=\"taglist\"&gt;"</span></span><span class="org-block">
   (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-post-taglist</span></span><span class="org-block"> post-filename)
   </span><span class="org-block"><span class="string">"&lt;/div&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;;</span></span><span class="org-block"><span class="comment">
</span></span><span class="org-block">   </span><span class="org-block"><span class="string">"&lt;center&gt;&lt;strong&gt; Generated by Emacs and Org-mode (&#8226;&#768;&#7447;&#8226;&#769;)&#1608; &lt;/strong&gt;&lt;/center&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Link to source and history
</span></span><span class="org-block">   </span><span class="org-block"><span class="string">"&lt;center&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">"&lt;a href=\"<a href="https://raw.githubusercontent.com/alhassy/alhassy.github.io/master/posts/">https://raw.githubusercontent.com/alhassy/alhassy.github.io/master/posts/</a>"
</span></span><span class="org-block">   </span><span class="org-block"><span class="string">"&lt;a href=\""</span></span><span class="org-block">
   (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> post-filename) </span><span class="org-block"><span class="string">".org.html\"&gt;&lt;img
   src=\"<a href="https://img.shields.io/badge/-Source-informational?logo=read-the-docs">https://img.shields.io/badge/-Source-informational?logo=read-the-docs</a>\"&gt;&lt;/a&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"&amp;emsp;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"&lt;a href=\"<a href="https://github.com/alhassy/alhassy.github.io/commits/master/">https://github.com/alhassy/alhassy.github.io/commits/master/</a>"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"posts/"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> post-filename) </span><span class="org-block"><span class="string">".org\"&gt;&lt;img
   src=\"<a href="https://img.shields.io/badge/-History-informational?logo=github">https://img.shields.io/badge/-History-informational?logo=github</a>\"&gt;&lt;/a&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"&lt;br&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"&lt;a href=\"<a href="https://www.buymeacoffee.com/alhassy">https://www.buymeacoffee.com/alhassy</a>\"&gt;&lt;img src="</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"\"<a href="https://img.shields.io/badge/-buy_me_a%C2%A0coffee-gray?logo=buy-me-a-coffee">https://img.shields.io/badge/-buy_me_a%C2%A0coffee-gray?logo=buy-me-a-coffee</a>\"&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"&lt;/a&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"&lt;/center&gt;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Comments
</span></span><span class="org-block">   (</span><span class="org-block"><span class="keyword">if</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">string=</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-post-comments</span></span><span class="org-block"> </span><span class="org-block"><span class="string">""</span></span><span class="org-block">)
       </span><span class="org-block"><span class="string">""</span></span><span class="org-block">
     (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"\n&lt;div id=\"comments\"&gt;"</span></span><span class="org-block">
             </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-post-comments</span></span><span class="org-block">
             </span><span class="org-block"><span class="string">"&lt;/div&gt;"</span></span><span class="org-block">))))
</span><span class="org-block-end-line">#+end_src
</span>
<span class="org-block-begin-line">#+begin_edcomm
</span><span class="org-special-keyword">:ed:</span> <span class="org-property-value">&#4314;(&#3232;&#30410;&#3232;)&#4314;</span>

I want to consistently use the same theme to <span class="flyspell-duplicate">htmlize</span> Org source, rather than the
<span class="italic">current session's</span> theme.
<span class="org-block-end-line">#+end_edcomm
</span>
<span class="org-level-1">* The Index Page</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
<span class="org-target">&lt;&lt;Index&gt;&gt;</span>

<span class="comment"># The org-static-blog-with-find-file macro does a lot of &#8216;in your face&#8217; writing,</span>
<span class="comment"># which really ought to </span><span class="comment"><span class="writegood-passive-voice">be hidden</span></span><span class="comment"> from sight.</span>

I'd like to be able to quickly change the blurb on the index page, so we make a
variable for that ---consisting of Org-markup.
<span class="org-block-begin-line">#+begin_src emacs-lisp -n
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> index-content-header
  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"Here are </span></span><span class="org-block"><span class="string"><span class="writegood-weasels">some</span></span></span><span class="org-block"><span class="string"> of my latest thoughts..."</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">" <a href="badge:Made_with|Lisp">badge:Made_with|Lisp</a> such as <a href="doc:thread-first">doc:thread-first</a> and <a href="doc:loop">doc:loop</a> (&#8226;&#768;&#7447;&#8226;&#769;)&#1608;"</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">" <a href="tweet:https://alhassy.github.io/">tweet:https://alhassy.github.io/</a>"</span></span><span class="org-block">))
</span><span class="org-block-end-line">#+end_src
</span>
<span class="comment"># The existing org-static-blog-assemble-index is really fast,</span>
<span class="comment"># since it just dumps articles wholesale into the landing page; not ideal.</span>
<span class="comment"># I'd rather have a &#8216;preview&#8217; of articles.</span>

The index page is a <span class="flyspell-duplicate">multipost</span> page, so I'll override the
<span class="org-verbatim">org-static-blog-assemble-multipost-page</span> method so that articles <span class="writegood-passive-voice">are
summarised</span> by their title, data &amp; image, &#8216;abstract&#8217;, and a read-more badge.
- Every article <span class="writegood-passive-voice">is intended</span> to have a section named <span class="org-verbatim">Abstract</span>, whose contents
  <span class="writegood-passive-voice">are used</span> as the preview of the article. See &#167;<span class="org-link"><a href="new-article">new-article</a></span> for a template.
<span class="org-block-begin-line">#+begin_src emacs-lisp -n
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> show-reading-time nil)

(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">org-static-blog-assemble-multipost-page</span></span><span class="org-block">
    (pub-filename post-filenames </span><span class="org-block"><span class="type">&amp;optional</span></span><span class="org-block"> front-matter)
  </span><span class="org-block"><span class="doc">"Assemble a page that contains multiple posts one after another.
Posts </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">are sorted</span></span></span><span class="org-block"><span class="doc"> in descending time."</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> post-filenames
        (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">sort</span></span><span class="org-block"> post-filenames (</span><span class="org-block"><span class="keyword">lambda</span></span><span class="org-block"> (x y)
                               (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">time-less-p</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-get-date</span></span><span class="org-block"> y)
                                            (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-get-date</span></span><span class="org-block"> x)))))
  (</span><span class="org-block"><span class="keyword">with-temp-buffer</span></span><span class="org-block">
    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">insert</span></span><span class="org-block">
     (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"#+EXPORT_FILE_NAME: "</span></span><span class="org-block"> pub-filename
      </span><span class="org-block"><span class="string">"\n#+options: toc:nil title:nil html-postamble:nil"</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"\n#+title: "</span></span><span class="org-block"> (</span><span class="org-block"><span class="keyword">if</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">equal</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"index"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> pub-filename))
                        </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-publish-title</span></span><span class="org-block">
                        (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> pub-filename))
      </span><span class="org-block"><span class="string">"\n#+begin_export html\n "</span></span><span class="org-block">
        </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-page-preamble</span></span><span class="org-block">
        </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-page-header</span></span><span class="org-block">
        (</span><span class="org-block"><span class="keyword">if</span></span><span class="org-block"> front-matter front-matter </span><span class="org-block"><span class="string">""</span></span><span class="org-block">)
      </span><span class="org-block"><span class="string">"\n#+end_export"</span></span><span class="org-block">

      </span><span class="org-block"><span class="string">"\n\n"</span></span><span class="org-block">
      (</span><span class="org-block"><span class="keyword">if</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">equal</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"index"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> pub-filename))
          (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"#+begin_export html\n%s\n#+end_export\n%s"</span></span><span class="org-block">
                  </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-page-header</span></span><span class="org-block"> index-content-header)
        </span><span class="org-block"><span class="string">""</span></span><span class="org-block">)

      </span><span class="org-block"><span class="string">"\n\n"</span></span><span class="org-block"> </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">abstracts of posts
</span></span><span class="org-block">      (</span><span class="org-block"><span class="keyword">thread-last</span></span><span class="org-block"> post-filenames
        (</span><span class="org-block"><span class="keyword">--map</span></span><span class="org-block">
         (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block">
          (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
           </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;0&#10217; Title and link to article
</span></span><span class="org-block">           </span><span class="org-block"><span class="string">"#+HTML: &lt;h2 class=\"title\"&gt;&lt;a href=\"%s\"&gt; %s&lt;/a&gt;&lt;/h2&gt;"</span></span><span class="org-block">
           </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;1&#10217; Tags and reading time
</span></span><span class="org-block">           </span><span class="org-block"><span class="string">"\n#+begin_center\n%s\n%s\n#+end_center"</span></span><span class="org-block">
           </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;2&#10217; Article image
</span></span><span class="org-block">           </span><span class="org-block"><span class="string">"\n</span></span><span class="org-block"><span class="warning">@@html</span></span><span class="org-block"><span class="string">:%s@@"</span></span><span class="org-block">
           </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;3&#10217; Preview
</span></span><span class="org-block">           </span><span class="org-block"><span class="string">"\n#+INCLUDE: \"%s::*Abstract\" :only-contents t"</span></span><span class="org-block">
           </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;4&#10217; &#8220;Read more&#8221; link
</span></span><span class="org-block">           </span><span class="org-block"><span class="string">"\n</span></span><span class="org-block"><span class="warning">@@html:&lt;p style=\"text-align</span></span><span class="org-block"><span class="string">:right\"&gt;@@"</span></span><span class="org-block">
           </span><span class="org-block"><span class="string">" <a href="badge:Read|more|green|%s|read-the-docs">badge:Read|more|green|%s|read-the-docs</a> </span></span><span class="org-block"><span class="warning">@@html</span></span><span class="org-block"><span class="string">:&lt;/p&gt;@@"</span></span><span class="org-block">)
          </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;0&#10217; Title and link to article
</span></span><span class="org-block">          (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-publish-url</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> it))
          (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-get-title</span></span><span class="org-block"> it)
          </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;1&#10217; Tags and reading time
</span></span><span class="org-block">          (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name"><a href="octoicon:tag">octoicon:tag</a></span></span><span class="org-block"> </span><span class="org-block"><span class="string">" "</span></span><span class="org-block">
                  (</span><span class="org-block"><span class="highlight-defined-function-name">s-join</span></span><span class="org-block"> </span><span class="org-block"><span class="string">" "</span></span><span class="org-block">
                          (</span><span class="org-block"><span class="keyword">--map</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"<a href="badge:|%s|grey|%stag-%s.html">badge:|%s|grey|%stag-%s.html</a>"</span></span><span class="org-block">
                                         (</span><span class="org-block"><span class="highlight-defined-function-name">s-replace</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"-"</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"_"</span></span><span class="org-block"> it)
                                         </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-publish-url</span></span><span class="org-block"> it)
                                 (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-get-tags</span></span><span class="org-block"> it))))
          (</span><span class="org-block"><span class="keyword">if</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">not</span></span><span class="org-block"> show-reading-time)
              </span><span class="org-block"><span class="string">""</span></span><span class="org-block">
            (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"\n%s %s mins read"</span></span><span class="org-block">
                    </span><span class="org-block"><span class="highlight-defined-variable-name"><a href="octoicon:clock">octoicon:clock</a></span></span><span class="org-block">
                    (</span><span class="org-block"><span class="keyword">with-temp-buffer</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">insert-file-contents</span></span><span class="org-block"> it)
                                      (</span><span class="org-block"><span class="highlight-defined-function-name">org-ascii-export-as-ascii</span></span><span class="org-block">)
                                      (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> __x
                                            (</span><span class="org-block"><span class="highlight-defined-function-name">count-words</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">point-min</span></span><span class="org-block">) (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">point-max</span></span><span class="org-block">)))
                                      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">kill-buffer</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"*Org ASCII Export*"</span></span><span class="org-block">)
                                      (</span><span class="org-block"><span class="highlight-defined-function-name">delete-other-windows</span></span><span class="org-block">)
                                      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">/</span></span><span class="org-block"> __x 200)))) </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">200 words per minute reading
</span></span><span class="org-block">          </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;2&#10217; Article image
</span></span><span class="org-block">          (</span><span class="org-block"><span class="highlight-defined-function-name">my/org-static-blog-assemble-image</span></span><span class="org-block"> it)
          </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;3&#10217; Preview
</span></span><span class="org-block">          it
          </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#10216;4&#10217; &#8220;Read more&#8221; link
</span></span><span class="org-block">          (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-publish-url</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> it))))
        (</span><span class="org-block"><span class="highlight-defined-function-name">s-join</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"\n\n"</span></span><span class="org-block">))

      </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">bottom matter
</span></span><span class="org-block">      </span><span class="org-block"><span class="string">"\n#+begin_export html:\n"</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"&lt;hr&gt;&lt;hr&gt; &lt;div id=\"archive\"&gt;"</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"&lt;a href=\""</span></span><span class="org-block">
      (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-get-absolute-url</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-archive-file</span></span><span class="org-block">)
      </span><span class="org-block"><span class="string">"\"&gt;"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-gettext</span></span><span class="org-block"> 'other-posts) </span><span class="org-block"><span class="string">"&lt;/a&gt;"</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"&lt;/div&gt;"</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"&lt;/div&gt;"</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"&lt;div id=\"postamble\" class=\"status\"&gt;"</span></span><span class="org-block">
      </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-page-postamble</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"&lt;/div&gt;"</span></span><span class="org-block">
      </span><span class="org-block"><span class="string">"\n#+end_export"</span></span><span class="org-block">))
    (</span><span class="org-block"><span class="highlight-defined-function-name">org-mode</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="highlight-defined-function-name">org-html-export-to-html</span></span><span class="org-block">)))
</span><span class="org-block-end-line">#+end_src
</span>
<span class="org-level-1">* Curvy Source Blocks</span>

<span class="org-target">&lt;&lt;curvy-blocks&gt;&gt;</span>

The <span class="org-verbatim">border-radius</span> property defines the radius of an
element's corners, we use it to make curvy looking source blocks.
Its behaviour <span class="org-link"><a href="https://www.w3schools.com/cssref/css3_pr_border-radius.asp">changes</a></span> depending on how <span class="writegood-weasels">many</span> arguments it <span class="writegood-passive-voice">is given</span>.
- We also style the code block's label to be curvy.
- Both <span class="org-verbatim">.src</span> and <span class="org-verbatim">pre.src:before</span> <span class="writegood-passive-voice">are defined</span> by Org.

<span class="org-block-begin-line">#+begin_src css -r -n :tangle ~/blog/blog-banner.css :noeval -n
</span><span class="org-block"><span class="css-selector">.src </span></span><span class="org-block">{
  </span><span class="org-block"><span class="css-property">border</span></span><span class="org-block">: 0px </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;
  </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">50px for top-left and bottom-right corners;
     20px for top-right and bottom-left cornerns. </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
  </span><span class="org-block"><span class="css-property">border-radius</span></span><span class="org-block">: 50px 20px </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;
}

</span><span class="org-block"><span class="css-selector">pre.src:before </span></span><span class="org-block">{
    </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">border: 0px !important; </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
    </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">background-color: inherit !important; </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
    </span><span class="org-block"><span class="css-property">padding</span></span><span class="org-block">: 3px </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;
    </span><span class="org-block"><span class="css-property">border-radius</span></span><span class="org-block">: 20px 50px </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;
    </span><span class="org-block"><span class="css-property">font-weight</span></span><span class="org-block">:700
}

 </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">wrap lengthy lines for code blocks </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
 </span><span class="org-block"><span class="css-selector">pre</span></span><span class="org-block">{</span><span class="org-block"><span class="css-property">white-space</span></span><span class="org-block">:pre-wrap}

 </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">Also curvy inline code with ~ &#8943; ~ and = &#8943; = </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
 </span><span class="org-block"><span class="css-selector">code </span></span><span class="org-block">{
     </span><span class="org-block"><span class="css-property">background</span></span><span class="org-block">: Cyan </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;
     </span><span class="org-block"><span class="css-property">border-radius</span></span><span class="org-block">: 7px;
     </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">border: 1px solid lightgrey; background: #FFFFE9; padding: 2px </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
 }
</span><span class="org-block-end-line">#+end_src
</span>
Code such as <span class="org-code">(= 2 (+ </span><span class="org-code"><span class="writegood-duplicates">1 1</span></span><span class="org-code">))</span> now sticks out with a cyan background <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/2665.png" alt="&#9829;" />&#8255;<img src="../../.emacs.d/emojis/emojione-v2.2.6-22/2665.png" alt="&#9829;" />

<span class="org-block-begin-line">#+begin_src css :tangle ~/blog/blog-banner.css :noeval -n
</span><span class="org-block"> </span><span class="org-block"><span class="css-selector">table </span></span><span class="org-block">{
     </span><span class="org-block"><span class="css-property">background</span></span><span class="org-block">: </span><span class="org-block"><span class="custom-1">pink</span></span><span class="org-block">;
     </span><span class="org-block"><span class="css-property">border-radius</span></span><span class="org-block">: 10px;
     </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">width:90% </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">

     </span><span class="org-block"><span class="css-property">border-bottom</span></span><span class="org-block">: hidden;
     </span><span class="org-block"><span class="css-property">border-top</span></span><span class="org-block">: hidden;

     </span><span class="org-block"><span class="css-property">display</span></span><span class="org-block">: table </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;

     </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">Put table in the center of the page, horizontally. </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
     </span><span class="org-block"><span class="css-property">margin-left</span></span><span class="org-block">:auto </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;</span><span class="org-block"><span class="css-property">margin-right</span></span><span class="org-block">:auto </span><span class="org-block"><span class="builtin">!important</span></span><span class="org-block">;

     </span><span class="org-block"><span class="css-property">font-family</span></span><span class="org-block">:</span><span class="org-block"><span class="string">"Courier New"</span></span><span class="org-block">;
     </span><span class="org-block"><span class="css-property">font-size</span></span><span class="org-block">:90%;
 }

 </span><span class="org-block"><span class="comment-delimiter">/* </span></span><span class="org-block"><span class="comment">Styling for &#8216;t&#8217;able &#8216;d&#8217;ata and &#8216;h&#8217;eader elements </span></span><span class="org-block"><span class="comment-delimiter">*/</span></span><span class="org-block">
 </span><span class="org-block"><span class="css-selector">th, td </span></span><span class="org-block">{
     </span><span class="org-block"><span class="css-property">border</span></span><span class="org-block">: 0px solid </span><span class="org-block"><span class="custom">red</span></span><span class="org-block">;
 }
</span><span class="org-block-end-line">#+end_src
</span><span class="org-meta-line">#+caption:</span> <span class="org-block">Example table</span>
<span class="org-table">| Prime | 2^{Prime} |</span>
<span class="org-table">|-------+-----------|</span>
<span class="org-table">|  </span><span class="org-formula">&lt;c&gt;</span><span class="org-table">  |    </span><span class="org-formula">&lt;c&gt;</span><span class="org-table">    |</span>
<span class="org-table">|   1   |     2     |</span>
<span class="org-table">|   2   |     4     |</span>
<span class="org-table">|   3   |     8     |</span>
<span class="org-table">|   5   |    32     |</span>
<span class="org-table">|   7   |    128    |</span>
<span class="org-table">|  11   |   2048    |</span>
<span class="org-meta-line">#+TBLFM: $2='(expt 2 $1);N</span>

<span class="comment"># For the line wrapping, it may be useful to have</span>
<span class="comment"># #+PROPERTY: header-args -n at the top of the file</span>
<span class="comment"># to have all blocks displayed with line numbers.</span>

<span class="org-block-begin-line">#+begin_src emacs-lisp
</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block">MA</span><span class="org-block"><span class="comment">: Relocate this to my init.
</span></span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Table captions should be below the tables
</span></span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-html-table-caption-above</span></span><span class="org-block"> nil
      org-export-latex-table-caption-above nil)
</span><span class="org-block-end-line">#+end_src
</span>
<span class="org-level-1">* </span><span class="org-level-1"><span class="org-verbatim">my/blog/new-article</span></span>
<span class="org-target">&lt;&lt;new-article&gt;&gt;</span>

Helper function to make a new article.
<span class="org-block-begin-line">#+BEGIN_SRC emacs-lisp -n
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defvar</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">my/blog/tags</span></span><span class="org-block">
  '(emacs faith category-theory order-theory
    lisp types packages haskell agda
    c frama-c program-proving)
  </span><span class="org-block"><span class="doc">"Tags for my blog articles."</span></span><span class="org-block">)

</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Use C-SPC to select multiple items
</span></span><span class="org-block">
(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">my/blog/new-article</span></span><span class="org-block"> ()
  </span><span class="org-block"><span class="doc">"Make a new article for my blog; prompting for the necessary ingredients.

If the filename entered already exists, we </span></span><span class="org-block"><span class="doc"><span class="writegood-weasels">simply</span></span></span><span class="org-block"><span class="doc"> write to it.
The user notices this and picks a new name."</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">interactive</span></span><span class="org-block">)
  (</span><span class="org-block"><span class="keyword">let</span></span><span class="org-block"> (file desc)

    (</span><span class="org-block"><span class="keyword">thread-last</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-posts-directory</span></span><span class="org-block">
      </span><span class="org-block"><span class="highlight-defined-function-name">f-entries</span></span><span class="org-block">
      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">mapcar</span></span><span class="org-block"> #'</span><span class="org-block"><span class="highlight-defined-function-name">f-filename</span></span><span class="org-block">)
      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">completing-read</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"Filename (Above are existing): "</span></span><span class="org-block">)
      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-static-blog-posts-directory</span></span><span class="org-block">)
      (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> file))

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">For </span></span><span class="org-block"><span class="comment"><span class="writegood-weasels">some</span></span></span><span class="org-block"><span class="comment"> reason, &#8216;</span></span><span class="org-block"><span class="comment"><span class="constant">find-file</span></span></span><span class="org-block"><span class="comment">&#8217; in the thread above
</span></span><span class="org-block">    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">wont let the completing-read display the possible completions.
</span></span><span class="org-block">    (</span><span class="org-block"><span class="highlight-defined-function-name">find-</span></span><span class="org-block"><span class="highlight-defined-function-name"><span class="writegood-duplicates">file</span></span></span><span class="org-block"><span class="writegood-duplicates"> file</span></span><span class="org-block">)

    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">insert</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"#+title: "</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">read-string</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"Title: "</span></span><span class="org-block">)
            </span><span class="org-block"><span class="string">"\n#+author: "</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-builtin-function-name">user-full-name</span></span><span class="org-block">
            </span><span class="org-block"><span class="string">"\n#+email: "</span></span><span class="org-block">  </span><span class="org-block"><span class="highlight-defined-variable-name">user-mail-address</span></span><span class="org-block">
            </span><span class="org-block"><span class="string">"\n#+date: "</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format-time-string</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"&lt;%Y-%m-%d %H:%M&gt;"</span></span><span class="org-block">)
            </span><span class="org-block"><span class="string">"\n#+filetags: "</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">s-join</span></span><span class="org-block"> </span><span class="org-block"><span class="string">" "</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">helm-comp-read</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"Tags: "</span></span><span class="org-block">
                                                         </span><span class="org-block"><span class="highlight-defined-variable-name">my/blog/tags</span></span><span class="org-block">
                                                         </span><span class="org-block"><span class="builtin">:marked-candidates</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">t</span></span><span class="org-block">))
            </span><span class="org-block"><span class="string">"\n#+fileimage: "</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">completing-read</span></span><span class="org-block">
                               </span><span class="org-block"><span class="string">"Image: "</span></span><span class="org-block">
                               (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">mapcar</span></span><span class="org-block"> #'</span><span class="org-block"><span class="highlight-defined-function-name">f-filename</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-entries</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/blog/images/"</span></span><span class="org-block">)))
            </span><span class="org-block"><span class="string">"\n#+description: "</span></span><span class="org-block">
               (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> desc (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">read-string</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"Article Purpose: "</span></span><span class="org-block">))
            </span><span class="org-block"><span class="string">"\n\n* Abstract :ignore: \n"</span></span><span class="org-block"> desc
            </span><span class="org-block"><span class="string">"\n\n* ???"</span></span><span class="org-block">)))
</span><span class="org-block-end-line">#+END_SRC
</span>
<span class="org-target">&lt;&lt;unfurling&gt;&gt;</span>

The <span class="org-verbatim">#+description</span> <span class="writegood-passive-voice">is exported</span> as HTML meta-data which <span class="writegood-passive-voice">is used</span> to
&#8216;unfurl&#8217; a link to an article: When a link to an article <span class="writegood-passive-voice">is pasted</span>
in a social media website, it <span class="italic">unfurls</span> into a little card showing
<span class="writegood-weasels">some</span> information about the link, such as its image, description, and author.
- For long descriptions, one can use multiple <span class="org-verbatim">#+description</span> lines;
  I'd like to have a terse one-liner with a longer description in the
  <span class="org-verbatim">Abstract</span> heading.

<span class="org-level-1">* Publishing with </span><span class="org-level-1"><span class="org-verbatim">[C-u C-u] C-</span></span><span class="org-level-1"><span class="org-verbatim"><span class="writegood-duplicates">c C</span></span></span><span class="org-level-1"><span class="org-verbatim">-b</span></span>
<span class="org-drawer">  :PROPERTIES:...
:Hide_fornow:...
</span>
<span class="org-block-begin-line">#+begin_src emacs-lisp -r -n
</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Override all minor modes that use this binding.
</span></span><span class="org-block">(</span><span class="org-block"><span class="keyword">bind-key*</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">kbd</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"C-</span></span><span class="org-block"><span class="string"><span class="writegood-duplicates">c C</span></span></span><span class="org-block"><span class="string">-b"</span></span><span class="org-block">)
  (</span><span class="org-block"><span class="keyword">lambda</span></span><span class="org-block"> (</span><span class="org-block"><span class="type">&amp;optional</span></span><span class="org-block"> prefix)
</span><span class="org-block"><span class="doc">"C-</span></span><span class="org-block"><span class="doc"><span class="writegood-duplicates">c C</span></span></span><span class="org-block"><span class="doc">-b        &#8658; Publish current buffer
C-u C-</span></span><span class="org-block"><span class="doc"><span class="writegood-duplicates">c C</span></span></span><span class="org-block"><span class="doc">-b     &#8658; Publish entire blog
C-u C-u C-</span></span><span class="org-block"><span class="doc"><span class="writegood-duplicates">c C</span></span></span><span class="org-block"><span class="doc">-b &#8658; Publish entire blog; re-rendering all blog posts
                  (This will take time!)
"</span></span><span class="org-block">
     (</span><span class="org-block"><span class="keyword">interactive</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"P"</span></span><span class="org-block">)
     (</span><span class="org-block"><span class="keyword">pcase</span></span><span class="org-block"> (</span><span class="org-block"><span class="keyword">or</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">car</span></span><span class="org-block"> prefix) 0)
       (0  (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-publish-file</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-full</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">buffer-name</span></span><span class="org-block">))))
           </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(browse-url-of-file (format "%s%s.html" org-static-blog-posts-directory
</span></span><span class="org-block">           </span><span class="org-block"><span class="comment-delimiter">;;                            </span></span><span class="org-block"><span class="comment">(f-base (buffer-name))))
</span></span><span class="org-block">       </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Apparently I have to publish the current buffer before trying
</span></span><span class="org-block">       </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">to publish the blog; otherwise I got </span></span><span class="org-block"><span class="comment"><span class="writegood-weasels">some</span></span></span><span class="org-block"><span class="comment"> errors.
</span></span><span class="org-block">       (4  (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-publish-file</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-full</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">buffer-name</span></span><span class="org-block">)))
           (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-publish</span></span><span class="org-block">))
       (16 </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(org-static-blog-publish t) &#8658; Crashes.
</span></span><span class="org-block">           </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Delete all .html files, except &#8220;about&#8221;
</span></span><span class="org-block">           (</span><span class="org-block"><span class="keyword">thread-last</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-entries</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/blog/"</span></span><span class="org-block">)
             (</span><span class="org-block"><span class="keyword">--filter</span></span><span class="org-block"> (</span><span class="org-block"><span class="keyword">and</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">equal</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-ext</span></span><span class="org-block"> it) </span><span class="org-block"><span class="string">"html"</span></span><span class="org-block">)
                            (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">not</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">member</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-base</span></span><span class="org-block"> it) '(</span><span class="org-block"><span class="string">"about"</span></span><span class="org-block">)))))
             (</span><span class="org-block"><span class="keyword">--map</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-delete</span></span><span class="org-block"> it))) </span><span class="org-block"><span class="warning">(ref:delAll)</span></span><span class="org-block">
           </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Publish as usual
</span></span><span class="org-block">           (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-publish-file</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">f-full</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">buffer-name</span></span><span class="org-block">)))
           (</span><span class="org-block"><span class="highlight-defined-function-name">org-static-blog-publish</span></span><span class="org-block">)))))
</span><span class="org-block-end-line">#+end_src
</span>
Line <span class="org-link"><a href="(delAll)">(delAll)</a></span>: To re-render an article, just remove its corresponding .html file <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/1f609.png" alt=";-)" />

<span class="org-level-1">* </span><span class="org-special-keyword">COMMENT</span><span class="org-level-1"> Ideas</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
+ in the index, under each article's name:
  - reading length <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/1f609.png" alt=";-)" />
  - twitter link <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/1f609.png" alt=";-)" />
    - per article via advice

<span class="org-block-begin-line"> #+begin_export html
</span><span class="org-block"> &lt;</span><span class="org-block"><span class="function-name">footer</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">class</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"container"</span></span><span class="org-block">&gt;
     &lt;</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">class</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"site-footer"</span></span><span class="org-block">&gt;

         &lt;</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">class</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"copyright pull-left"</span></span><span class="org-block">&gt;
             Powered by
             &lt;</span><span class="org-block"><span class="function-name">a</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">href</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"<a href="https://github.com/alhassy/emacs.d">https://github.com/alhassy/emacs.d</a>"</span></span><span class="org-block">&gt;Emacs&lt;/</span><span class="org-block"><span class="function-name">a</span></span><span class="org-block">&gt;
         &lt;/</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block">&gt;

         &lt;</span><span class="org-block"><span class="function-name">a</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">href</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"<a href="https://github.com/alhassy">https://github.com/alhassy</a>"</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">target</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"_blank"</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">aria-label</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"view source code"</span></span><span class="org-block">&gt;
             octicon-github
         &lt;/</span><span class="org-block"><span class="function-name">a</span></span><span class="org-block">&gt;

         &lt;</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">class</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"pull-right"</span></span><span class="org-block">&gt;
             &lt;</span><span class="org-block"><span class="function-name">a</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">href</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"javascript:window.scrollTo(0,0)"</span></span><span class="org-block"> &gt;TOP&lt;/</span><span class="org-block"><span class="function-name">a</span></span><span class="org-block">&gt;
         &lt;/</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block">&gt;
     &lt;/</span><span class="org-block"><span class="custom-7">div</span></span><span class="org-block">&gt;
 &lt;/</span><span class="org-block"><span class="function-name">footer</span></span><span class="org-block">&gt;
</span><span class="org-block-end-line"> #+end_export
</span>
 + Footer should include
   - See Org Source; see HTML source
   - buy-me-a-coffee

<span class="org-meta-line">#+html: &lt;hr&gt;</span>


<span class="org-level-1">* The name: </span><span class="org-link"><a href="https://en.wikipedia.org/wiki/Basmala">al-bas-mala</a></span>
<span class="org-drawer">  :PROPERTIES:...
</span>
The prefix <span class="italic">al</span> is the Arabic definite particle which may correspond to English's <span class="italic">the</span>;
whereas <span class="italic">basmala</span> refers to a beginning.

That is, this is a variation on the traditional <span class="org-link"><a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">"hello world"</a></span> <img src="../../.emacs.d/emojis/emojione-v2.2.6-22/1f609.png" alt=";-)" />

<span class="org-level-1">* </span><span class="org-special-keyword">COMMENT</span><span class="org-level-1"> Old Jekyll Setup </span><span class="org-level-1"><span class="org-tag">:posterity:terrible:</span></span>
<span class="org-drawer">  :PROPERTIES:...
</span>Write in Org-mode and generate coloured markdown for Jekyll usage

<span class="comment"># Usage &#8759; Begin blog server then load AlBasmala, then edit &amp; preview.</span>
<span class="org-meta-line">#
# (shell-command "cd ~/alhassy.github.io/ ; bundle exec jekyll serve &amp;")</span>
<span class="comment"># (find-file "~/alhassy.github.io/content/AlBasmala.el")</span>
<span class="comment"># (preview-article :browser t)</span>
<span class="comment"># (preview-article)</span>

<span class="org-hide">*</span><span class="org-level-2">* Server Setup</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
 When drafting, it's ideal to be able to inspect the resulting web article.
 To do so, we may initialise the Jekyll server as follows.
<span class="org-block-begin-line"> #+begin_src emacs-lisp :tangle no
</span><span class="org-block">(</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"cd ~/alhassy.github.io/ ; bundle exec jekyll serve &amp;"</span></span><span class="org-block">)
</span><span class="org-block-end-line"> #+end_src
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: #&lt;window 328 on *Org-Babel Error Output*&gt;
</span>
 In order to be an Org only interface, let's remove this shell invocation from
 the user's view --as an Org user, they need not <span class="writegood-passive-voice">be forced</span> to learn such Jekyll intricacies.

<span class="org-block-begin-line"> #+begin_src emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defvar</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">jekyll-served</span></span><span class="org-block"> nil </span><span class="org-block"><span class="doc">"Documents whether the blog server has begun."</span></span><span class="org-block">)

(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">ensure-blog-is-serving</span></span><span class="org-block"> ()
  </span><span class="org-block"><span class="doc">"Ensure that the server has begun."</span></span><span class="org-block">
   (</span><span class="org-block"><span class="keyword">unless</span></span><span class="org-block"> jekyll-served
      (</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"cd ~/alhassy.github.io/ ; bundle exec jekyll serve &amp;"</span></span><span class="org-block">)
      (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> jekyll-served </span><span class="org-block"><span class="highlight-defined-variable-name">t</span></span><span class="org-block">)))
</span><span class="org-block-end-line"> #+end_src
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: ensure-blog-is-serving
</span>
 Super <span class="writegood-weasels">simple</span>, but hides an annoying step &amp; layer from the user.

<span class="org-hide">*</span><span class="org-level-2">* </span><span class="org-level-2"><span class="org-code">file</span></span><span class="org-level-2"> Symbols</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
 We will look at <span class="writegood-weasels">various</span> generated files revolving around the given file,
 so let us generate the necessary variables that refer to such names.

 First off, <span class="writegood-weasels">some</span> useful libraries.
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">require</span></span><span class="org-block"> '</span><span class="org-block"><span class="constant">dash</span></span><span class="org-block">) </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">A modern list library for Emacs
</span></span><span class="org-block">(</span><span class="org-block"><span class="keyword">require</span></span><span class="org-block"> '</span><span class="org-block"><span class="constant">s</span></span><span class="org-block">)    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">String processing library.
</span></span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: s
</span>
 Now, let's make a function that produces our variables.
 This way we avoid tedious repetition of a particular pattern.
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">cl-defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">make-file-extension-variables</span></span><span class="org-block"> (</span><span class="org-block"><span class="type">&amp;key</span></span><span class="org-block"> prefix name extensions)
  </span><span class="org-block"><span class="doc">" Produce symbols &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">prefix.ext</span></span></span><span class="org-block"><span class="doc">&#8217; whose value is the string &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">name.ext</span></span></span><span class="org-block"><span class="doc">&#8217;, where
    &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">ext</span></span></span><span class="org-block"><span class="doc">&#8217; range over the list &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">extensions</span></span></span><span class="org-block"><span class="doc">&#8217;.

    Both &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">prefix</span></span></span><span class="org-block"><span class="doc">&#8217; and &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">name</span></span></span><span class="org-block"><span class="doc">&#8217; should be strings.

    I insist that the arguments be keywords, &#8220;:prefix, :name, :extensions&#8221;,
    since I currently feel that this is more informative.
    All three pieces need to be there, otherwise no variables </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">are formed</span></span></span><span class="org-block"><span class="doc">.
    Success </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is signalled</span></span></span><span class="org-block"><span class="doc"> by the message string &#8221;new filename variables created&#8221;.

    Moreover, these symbols are local to the current buffer;
    in-particular, their values cannot </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">be altered</span></span></span><span class="org-block"><span class="doc"> from other buffers.
  "</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">and</span></span><span class="org-block"> prefix name
    (</span><span class="org-block"><span class="keyword">dolist</span></span><span class="org-block"> (ext extensions (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">message</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"new filename variables created"</span></span><span class="org-block">))
      (</span><span class="org-block"><span class="keyword">let*</span></span><span class="org-block"> ((name.ext (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> name </span><span class="org-block"><span class="string">"."</span></span><span class="org-block"> ext))
         (symbol   (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">intern</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> prefix </span><span class="org-block"><span class="string">"."</span></span><span class="org-block"> ext))))
       (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">set</span></span><span class="org-block"> symbol name.ext)
       </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(make-local-variable symbol)
</span></span><span class="org-block">       </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Undesirable since I want to use these names in other buffers.
</span></span><span class="org-block">      ))))
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: make-file-extension-variables
</span>
<span class="org-drawer"> :Example_of_locals_in_elisp:...
</span>
 With that in hand, let's actually make the <span class="org-code">file.*</span> variables.
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> AbsNAME (</span><span class="org-block"><span class="highlight-defined-function-name">file-name-sans-extension</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-builtin-function-name">buffer-file-name</span></span><span class="org-block">))
(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> NAME (</span><span class="org-block"><span class="highlight-defined-function-name">file-name-sans-extension</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">buffer-name</span></span><span class="org-block">)))

(make-file-extension-variables
   </span><span class="org-block"><span class="builtin">:prefix</span></span><span class="org-block">     </span><span class="org-block"><span class="string">"file"</span></span><span class="org-block">
   </span><span class="org-block"><span class="builtin">:</span></span><span class="org-block"><span class="builtin"><span class="writegood-duplicates">name</span></span></span><span class="org-block"><span class="writegood-duplicates">       NAME</span></span><span class="org-block">
   </span><span class="org-block"><span class="builtin">:extensions</span></span><span class="org-block"> '(</span><span class="org-block"><span class="string">"org"</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"el"</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"src"</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"tex"</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"pdf"</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"html"</span></span><span class="org-block">))
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: new filename variables created
</span>
 Finally, it would be nice to know where the blog repository lives.
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defvar</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">blogrepo</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/alhassy.github.io/"</span></span><span class="org-block">
    </span><span class="org-block"><span class="doc">"The path to the blog repository on a local machine."</span></span><span class="org-block">)

(</span><span class="org-block"><span class="keyword">defvar</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">blogrepo-posts</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/alhassy.github.io/_posts/"</span></span><span class="org-block">
    </span><span class="org-block"><span class="doc">"The path to the blog repository's posts directory."</span></span><span class="org-block">)

(</span><span class="org-block"><span class="keyword">defvar</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">blogrepo-file.pdf</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"../assets/pdfs/"</span></span><span class="org-block"> file.pdf) </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(concat "~/alhassy.github.io/assets/pdfs/" file.pdf)
</span></span><span class="org-block">  </span><span class="org-block"><span class="doc">"The path to the blog repository where the generated PDF should live."</span></span><span class="org-block">)

</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Make these variables local to the current buffer.
</span></span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Undesirable since I'd like to utlise these in other buffers.
</span></span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(make-local-variable 'blogrepo)
</span></span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(make-local-variable 'blogrepo-posts)
</span></span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(make-local-variable 'blogrepo-file.pdf)
</span></span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: blogrepo-file\.pdf
</span>
 Before we close we need Jekyll relevant names.
<span class="org-block-begin-line"> #+begin_src emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defvar</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">jekyll.name</span></span><span class="org-block"> nil
  </span><span class="org-block"><span class="doc">"The formal name of the resulting Jekyll blog article."</span></span><span class="org-block">)

(</span><span class="org-block"><span class="keyword">defvar</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">jekyll.name.md</span></span><span class="org-block"> nil
  </span><span class="org-block"><span class="doc">"The formal markdown of the resulting Jekyll blog article."</span></span><span class="org-block">)
</span><span class="org-block-end-line"> #+end_src
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: jekyll\.name\.md
</span>
<span class="org-hide">*</span><span class="org-level-2">* Get Org Keywords</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
 We want to be able to access <span class="org-code">#+key: value</span> pairs from the article org source
 as a variable <span class="org-code">org.key</span>. We also allow as input default values, since the user
 may not have provided values for them.

<span class="org-block-begin-line"> #+begin_src emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defvar</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">albasmala/keywords</span></span><span class="org-block">
 `((</span><span class="org-block"><span class="string">"title"</span></span><span class="org-block">       . nil)
   (</span><span class="org-block"><span class="string">"date"</span></span><span class="org-block">        . ,(</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format-time-string</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"%Y-%m-%d"</span></span><span class="org-block">))
   (</span><span class="org-block"><span class="string">"author"</span></span><span class="org-block">      . nil)
   (</span><span class="org-block"><span class="string">"image"</span></span><span class="org-block">       . nil)
   (</span><span class="org-block"><span class="string">"imageheight"</span></span><span class="org-block"> . 142)
   (</span><span class="org-block"><span class="string">"imagewidth"</span></span><span class="org-block">  . 142)
   (</span><span class="org-block"><span class="string">"categories"</span></span><span class="org-block">  . nil)
   (</span><span class="org-block"><span class="string">"sourcefile"</span></span><span class="org-block">  .
    ,(</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"<a href="https://raw.githubusercontent.com/alhassy/alhassy.github.io/master/content/">https://raw.githubusercontent.com/alhassy/alhassy.github.io/master/content/</a>"</span></span><span class="org-block">
        (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">buffer-name</span></span><span class="org-block">)))
   (</span><span class="org-block"><span class="string">"nopdf"</span></span><span class="org-block">              . nil)
   (</span><span class="org-block"><span class="string">"nomodificationdate"</span></span><span class="org-block"> . nil)
   (</span><span class="org-block"><span class="string">"draft"</span></span><span class="org-block">              . nil))
 </span><span class="org-block"><span class="doc">"This list contains tuples denoting a &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">property</span></span></span><span class="org-block"><span class="doc">&#8217; and it's &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">default</span></span></span><span class="org-block"><span class="doc">&#8217; value.
  These are the keywords that the user of this AlBasmala setup should utilise.

  For example, if the user does not provide a &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">date</span></span></span><span class="org-block"><span class="doc">&#8217;, then one </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is provided</span></span></span><span class="org-block"><span class="doc">,
  for them; the default date.

  Note that &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">sourcefile</span></span></span><span class="org-block"><span class="doc">&#8217; refers to the URL to the raw master location of the blog
  repository by default, but it's useful for the user to set it when the file </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is
  associated</span></span></span><span class="org-block"><span class="doc"> with a different repoistory. The URL should begin &#8216;<a href="https://">https://</a>&#8943;&#8217;.

  By default we produce a PDF and link to it from the article.
  If &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">nopdf</span></span></span><span class="org-block"><span class="doc">&#8217; </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is set</span></span></span><span class="org-block"><span class="doc"> to a non-nil value, then no PDF </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is generated</span></span></span><span class="org-block"><span class="doc">
  --which may be usefull since making a pdf takes time, which may not be desirable
  while drafting. Likewise, we always produce the most recent modification date,
  unless instructed otherwise. --c.f., &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">draft</span></span></span><span class="org-block"><span class="doc">&#8217;.

  The &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">draft</span></span></span><span class="org-block"><span class="doc">&#8217; variable is useful since it puts the word DRAFT alongside
  a generated number when drafting so as to ensure you're actually
  re-generating the article --rather than loading a previously generated one.
  When drafting, no PDF </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is generated</span></span></span><span class="org-block"><span class="doc">.

  Warning: The values cannot have links; e.g., embedding a link in the
  value of &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">author</span></span></span><span class="org-block"><span class="doc">&#8217; renders this script useless.
 "</span></span><span class="org-block">)
</span><span class="org-block-end-line"> #+end_src
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: albasmala/keywords
</span>
 For each keyword, let's uniformly produce these symbols, attempt to obtain their values,
 and use the defaults otherwise.

<span class="org-block-begin-line"> #+begin_src emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">make-org-variables</span></span><span class="org-block"> (keywords)
  </span><span class="org-block"><span class="doc">"For each &#8220;(key . default)&#8221; in the &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">keywords</span></span></span><span class="org-block"><span class="doc">&#8217; list, we produce a symbol named
  &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">org.key</span></span></span><span class="org-block"><span class="doc">&#8217; whose value </span></span><span class="org-block"><span class="doc"><span class="writegood-passive-voice">is set</span></span></span><span class="org-block"><span class="doc"> to be the value from &#8220;#+key: value&#8221;
  from the current buffer.

  The keys may be in lower case; we upcase them before obtaining
  their values. If there is no value, we use the defaults in &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">keywords</span></span></span><span class="org-block"><span class="doc">&#8217;.
  "</span></span><span class="org-block">

  (</span><span class="org-block"><span class="keyword">dolist</span></span><span class="org-block"> (keydef keywords (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">message</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"new org keyword variables created"</span></span><span class="org-block">))
    (</span><span class="org-block"><span class="keyword">let*</span></span><span class="org-block"> ((key (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">car</span></span><span class="org-block"> keydef))
       (value (</span><span class="org-block"><span class="highlight-defined-function-name">org-keyword</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">upcase</span></span><span class="org-block"> key)))
       (org.key (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"org."</span></span><span class="org-block"> key))
       (symbol  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">intern</span></span><span class="org-block"> org.key)))

       (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">set</span></span><span class="org-block"> symbol value)
       (</span><span class="org-block"><span class="keyword">unless</span></span><span class="org-block"> value (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">set</span></span><span class="org-block"> symbol (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">cdr</span></span><span class="org-block"> keydef)))
       (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">put</span></span><span class="org-block"> symbol 'variable-documentation
        </span><span class="org-block"><span class="string">"Variable generated by &#8216;</span></span><span class="org-block"><span class="string"><span class="constant">make-org-variables</span></span></span><span class="org-block"><span class="string">&#8217;"</span></span><span class="org-block">)

       </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(make-local-variable symbol)
</span></span><span class="org-block">       </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Undesirable since I use the &#8216;</span></span><span class="org-block"><span class="comment"><span class="constant">org.key</span></span></span><span class="org-block"><span class="comment">&#8217; symbols
</span></span><span class="org-block">       </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">in the assocaited html buffers.
</span></span><span class="org-block">      )))
</span><span class="org-block-end-line"> #+end_src
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: make-org-variables
</span>
<span class="org-drawer"> :Setting_docstrings_after_the_fact:...
</span>
 We know turn to actually obtaining the values of keywords as a function call.
 Why not just set them once? These values can <span class="writegood-passive-voice">be altered</span> any time by the user, e.g., me,
 and as such they need to <span class="writegood-passive-voice">be reloaded</span> before the post <span class="writegood-passive-voice">is created</span> as a precautionary measure.
 E.g., the title in the org file and the title in the article may be distinct, so we allow
       the user this added flexibility.

 We invoke <span class="org-code">make-org-variables</span> to produce variables of the form <span class="org-code">org.var</span>.

<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">GetOrgKeyWords</span></span><span class="org-block"> () </span><span class="org-block"><span class="doc">"Get the #+KEYWORD values from the org-file."</span></span><span class="org-block">

   (make-org-variables albasmala/keywords)

   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">We have these here in-case the &#8220;org.date&#8221; </span></span><span class="org-block"><span class="comment"><span class="writegood-passive-voice">is altered</span></span></span><span class="org-block"><span class="comment">.
</span></span><span class="org-block">   (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> jekyll.name   (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> org.date </span><span class="org-block"><span class="string">"-"</span></span><span class="org-block"> NAME))
   (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> jekyll.name.md (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> org.date </span><span class="org-block"><span class="string">"-"</span></span><span class="org-block"> NAME </span><span class="org-block"><span class="string">".markdown"</span></span><span class="org-block">))
)

</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Globally set the variables
</span></span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(GetOrgKeyWords)
</span></span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-meta-line"> #+RESULTS:</span>
 <span class="org-code">: GetOrgKeyWords
</span>
 Note that these values can be manually overridden by including in your locals, for example:
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle no
</span><span class="org-block"># eval: (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> org.title </span><span class="org-block"><span class="string">"Experimenting..."</span></span><span class="org-block"> )
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-hide">*</span><span class="org-level-2">* MakeHeader</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
 The Jekyll backend has a particular header for articles, which we produce:

<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">MakeHeader</span></span><span class="org-block"> () </span><span class="org-block"><span class="doc">"Header for Jekyll backend."</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> HEADER (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
   </span><span class="org-block"><span class="string">"---\nlayout: post\nname: "</span></span><span class="org-block"> jekyll.name
   </span><span class="org-block"><span class="string">"\ntitle: "</span></span><span class="org-block">          org.title
   </span><span class="org-block"><span class="string">"\ndate: "</span></span><span class="org-block">           org.date
   </span><span class="org-block"><span class="string">"\nauthor: "</span></span><span class="org-block">         org.author
   </span><span class="org-block"><span class="string">"\nimage:\n   href: "</span></span><span class="org-block">    org.image
   </span><span class="org-block"><span class="string">"\ncategories: "</span></span><span class="org-block">     org.categories
   </span><span class="org-block"><span class="string">"\n---\n"</span></span><span class="org-block">
   )))
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-hide">*</span><span class="org-level-2">* Article Image</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
 An image <span class="writegood-passive-voice">is included</span> via the <span class="org-code">#+IMAGE:location</span> --see the usages sections below.
 Alternative methods include.

 + An image can <span class="writegood-passive-voice">be embedded</span> as a url, in Org-mode:
<span class="org-block-begin-line">    #+BEGIN_SRC org :tangle no
</span><span class="org-block">,#+begin_export html
&lt;center&gt; &lt;img src="</span><span class="org-block"><span class="org-link"><a href="http://book.realworldhaskell.org/support/rwh-200.jpg">http://book.realworldhaskell.org/support/rwh-200.jpg</a></span></span><span class="org-block">"
  alt="RWH Cover" width="142" height="142" align="top"&gt; &lt;/center&gt;
,#+end_export
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-drawer">   :One_long_line:...
</span> + Or as an Org link:
<span class="org-block-begin-line">    #+BEGIN_SRC org :tangle no
</span><span class="org-block"><span class="org-link"><a href="file:../assets/img/rwh-200.jpg">[[file:../assets/img/rwh-200.jpg]]</a></span></span><span class="org-block">
</span><span class="org-block-end-line"> #+END_SRC
</span>
 + Or as local image via explicit html link:
<span class="org-block-begin-line">    #+BEGIN_SRC org :tangle no
</span><span class="org-block">,#+begin_export html
&lt;center&gt; &lt;img src="../assets/img/rwh-200.jpg" alt="RWH Cover"
width="142" height="142" align="top"&gt; &lt;/center&gt;
,#+end_export
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-drawer">   :One_long_line:...
</span>
 For now, I use the approach of inserting an HTML URL:
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">insert-image-and-other-formats</span></span><span class="org-block"> ()
   </span><span class="org-block"><span class="doc">"Insert image location obtained from #+IMAGE org keyword, as well as top-matter."</span></span><span class="org-block">

   (</span><span class="org-block"><span class="keyword">let</span></span><span class="org-block"> ((html.image.info
       (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"&lt;center&gt; &lt;img src=\""</span></span><span class="org-block"> org.image
         </span><span class="org-block"><span class="string">"\" alt=\"Musa's article image\""</span></span><span class="org-block">
         </span><span class="org-block"><span class="string">" width=\""</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"%s"</span></span><span class="org-block"> org.imagewidth) </span><span class="org-block"><span class="string">"\" "</span></span><span class="org-block">
         </span><span class="org-block"><span class="string">"height=\""</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"%s"</span></span><span class="org-block"> org.imageheight) </span><span class="org-block"><span class="string">"\" "</span></span><span class="org-block">
         </span><span class="org-block"><span class="string">"align=\"top\"&gt; &lt;/center&gt;"</span></span><span class="org-block">)))

   (re-replace-in-file </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">see below
</span></span><span class="org-block">      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> AbsNAME </span><span class="org-block"><span class="string">".html"</span></span><span class="org-block">)
      </span><span class="org-block"><span class="string">"&lt;h1.*h1&gt;"</span></span><span class="org-block">
      (</span><span class="org-block"><span class="keyword">lambda</span></span><span class="org-block"> (x) (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> x </span><span class="org-block"><span class="string">"\n"</span></span><span class="org-block"> html.image.info </span><span class="org-block"><span class="string">"\n"</span></span><span class="org-block"> (make-top-matter))))))
</span><span class="org-block-end-line"> #+END_SRC
</span>
 One possible extension would be to make parameters for image width and height.
 Perhaps I will get to doing so in time.

 Disclaimer: I wrote the following <span class="italic">before</span> I learned any lisp; everything below is
 <span class="writegood-weasels">probably</span> terrible.
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">re-replace-in-file</span></span><span class="org-block"> (file regex whatDo)
   </span><span class="org-block"><span class="doc">"Find and replace a regular expression in-place in a file.

   Terrible function &#8230; before I took the time to learn any Elisp!
   "</span></span><span class="org-block">
    (</span><span class="org-block"><span class="highlight-defined-function-name">find-</span></span><span class="org-block"><span class="highlight-defined-function-name"><span class="writegood-duplicates">file</span></span></span><span class="org-block"><span class="writegood-duplicates"> file</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">goto-char</span></span><span class="org-block"> 0)
    (</span><span class="org-block"><span class="keyword">let</span></span><span class="org-block"> ((altered (</span><span class="org-block"><span class="highlight-defined-function-name">replace-regexp-in-string</span></span><span class="org-block"> regex whatDo (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">buffer-string</span></span><span class="org-block">))))
      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">erase-buffer</span></span><span class="org-block">)
      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">insert</span></span><span class="org-block"> altered)
      (</span><span class="org-block"><span class="highlight-defined-function-name">save-buffer</span></span><span class="org-block">)
      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">kill-buffer</span></span><span class="org-block">)))
</span><span class="org-block-end-line"> #+END_SRC
</span>
 Example usage:
<span class="org-block-begin-line"> #+BEGIN_EXAMPLE emacs-lisp
</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Within mysite.html we rewrite: &lt;h1.*h1&gt;   &#8614;   &lt;h1.*h1&gt;\n NICE
</span></span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">I.e., we add a line break after the first heading and a new word, &#8220;NICE&#8221;.
</span></span><span class="org-block">(re-replace-in-file </span><span class="org-block"><span class="string">"mysite.html"</span></span><span class="org-block">
                    </span><span class="org-block"><span class="string">"&lt;h1.*h1&gt;"</span></span><span class="org-block">
                    (</span><span class="org-block"><span class="keyword">lambda</span></span><span class="org-block"> (x) (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> x </span><span class="org-block"><span class="string">"\n NICE"</span></span><span class="org-block">)))
</span><span class="org-block-end-line"> #+END_EXAMPLE
</span><span class="org-hide">*</span><span class="org-level-2">* PDF Generation</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
<span class="org-drawer"> :Old_tangle_latex_approach:...
</span>
 Finally, we weave everything together:
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Include LaTeX Org-calls, produce the PDF, then revert the file.
</span></span><span class="org-block"><span class="comment-delimiter">;;</span></span><span class="org-block"><span class="comment">
</span></span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">prepend-for-</span></span><span class="org-block"><span class="function-name"><span class="writegood-weasels">simple</span></span></span><span class="org-block"><span class="function-name">-latex</span></span><span class="org-block"> (</span><span class="org-block"><span class="type">&amp;rest</span></span><span class="org-block"> extras)
  </span><span class="org-block"><span class="doc">"Prepend an Org file with a </span></span><span class="org-block"><span class="doc"><span class="writegood-weasels">simple</span></span></span><span class="org-block"><span class="doc"> LaTeX preamble; perform extras before returing to source file.
  "</span></span><span class="org-block">
  (</span><span class="org-block"><span class="highlight-defined-function-name">save-buffer</span></span><span class="org-block">)
  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">copy-</span></span><span class="org-block"><span class="highlight-defined-builtin-function-name"><span class="writegood-duplicates">file</span></span></span><span class="org-block"><span class="writegood-duplicates"> file</span></span><span class="org-block">.org file.src 'overwrite)  </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Produce a checkpoint.
</span></span><span class="org-block">  (</span><span class="org-block"><span class="highlight-defined-function-name">beginning-of-buffer</span></span><span class="org-block">)

  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">insert</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">s-join</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"\n"</span></span><span class="org-block"> `(
    </span><span class="org-block"><span class="string">"#+OPTIONS: toc:nil"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\usepackage[margin=0.5in]{geometry}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\usepackage{fancyhdr}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\setlength{\\headheight}{30pt}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\lhead{} \\rhead{} \\cfoot{\\vspace{-3em} \\thepage} \\lfoot{} \\rfoot{}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\chead{\\emph{This PDF </span></span><span class="org-block"><span class="string"><span class="writegood-passive-voice">was generated</span></span></span><span class="org-block"><span class="string"> \\emph{ungracefully} from a web article on"</span></span><span class="org-block">
    ,(</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\url{<a href="https://alhassy.github.io/">https://alhassy.github.io/</a>"</span></span><span class="org-block"> NAME </span><span class="org-block"><span class="string">"/}}}"</span></span><span class="org-block">)
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\let\\doit=\\maketitle"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\def\\maketitle{\\doit\\thispagestyle{fancy}}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX: \\pagestyle{fancy} \\tableofcontents \\newpage"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\usepackage{color}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\definecolor{darkgreen}{rgb}{0.0, 0.3, 0.1}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\definecolor{darkblue}{rgb}{0.0, 0.1, 0.3}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"#+LATEX_HEADER: \\hypersetup{colorlinks,linkcolor=darkblue,citecolor=darkblue,urlcolor=darkgreen}"</span></span><span class="org-block">
    </span><span class="org-block"><span class="string">"\n"</span></span><span class="org-block">
      )))

  </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Using (lambda () (extras...)) makes the extras happen before the reversion below.
</span></span><span class="org-block">  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">eval</span></span><span class="org-block"> extras)

  </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">revert to working file
</span></span><span class="org-block">  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">copy-</span></span><span class="org-block"><span class="highlight-defined-builtin-function-name"><span class="writegood-duplicates">file</span></span></span><span class="org-block"><span class="writegood-duplicates"> file</span></span><span class="org-block">.src file.org 'overwrite)
  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">delete-</span></span><span class="org-block"><span class="highlight-defined-builtin-function-name"><span class="writegood-duplicates">file</span></span></span><span class="org-block"><span class="writegood-duplicates"> file</span></span><span class="org-block">.src)
  (toggle </span><span class="org-block"><span class="highlight-defined-variable-name">enable-local-variables</span></span><span class="org-block"> </span><span class="org-block"><span class="builtin">:all</span></span><span class="org-block">
    (</span><span class="org-block"><span class="highlight-defined-function-name">revert-buffer</span></span><span class="org-block"> 'ignore-auto 'no-confirmation))

  </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">A copy, rather a move, since article repo may differ from blog repo.
</span></span><span class="org-block">  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">copy-</span></span><span class="org-block"><span class="highlight-defined-builtin-function-name"><span class="writegood-duplicates">file</span></span></span><span class="org-block"><span class="writegood-duplicates"> file</span></span><span class="org-block">.pdf

         </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#8216;</span></span><span class="org-block"><span class="comment"><span class="constant">blogrepo-file.pdf</span></span></span><span class="org-block"><span class="comment">&#8217; is the path relative to the blog repository;
</span></span><span class="org-block">         </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">this format allows us to view the PDF when the local blog server is running.
</span></span><span class="org-block">         </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">However, we may currently be residing in a different repository.
</span></span><span class="org-block">         </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">As such, we shift the cp command to move to the absolute path to the blog repo.
</span></span><span class="org-block">         (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"~/alhassy.github.io"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">s-chop-prefix</span></span><span class="org-block"> </span><span class="org-block"><span class="string">".."</span></span><span class="org-block"> blogrepo-file.pdf))
         </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(file-truename blogrepo-file.pdf) ;; fix me
</span></span><span class="org-block">
         'overwrite
    )
)

(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">my-org-latex-export-to-pdf</span></span><span class="org-block"> ()
  </span><span class="org-block"><span class="doc">"Produce a </span></span><span class="org-block"><span class="doc"><span class="writegood-weasels">simple</span></span></span><span class="org-block"><span class="doc"> PDF that has wide margins and has a warning"</span></span><span class="org-block">
  (prepend-for-</span><span class="org-block"><span class="writegood-weasels">simple</span></span><span class="org-block">-latex (</span><span class="org-block"><span class="keyword">lambda</span></span><span class="org-block"> () (</span><span class="org-block"><span class="highlight-defined-function-name">org-latex-export-to-pdf</span></span><span class="org-block">)))
)

</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-hide">*</span><span class="org-level-2">* Other Formats</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
 Readers of the article may want to see the source
 --which may contain code or parts not rendered in the article, such as exercise solutions.
<span class="comment"> # --</span>
<span class="comment"> # or they may prefer a PDF version for printing or </span><span class="comment"><span class="writegood-weasels">simply</span></span><span class="comment"> for an alternate aesthetic.</span>

<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">get-raw-and-commits</span></span><span class="org-block"> (url)
  </span><span class="org-block"><span class="doc">"
  Given a github &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">url</span></span></span><span class="org-block"><span class="doc">&#8217;, return the associated commits history and raw textual urls,
  as a dotted pair.

  For example,
  url     &#8594; <a href="https://github.com/&#10218;user&#10219;/&#10218;project&#10219;/blob/master/content/&#10218;filepath">https://github.com/&#10218;user&#10219;/&#10218;project&#10219;/blob/master/content/&#10218;filepath</a>&#10219;
  raw     &#8594; <a href="https://raw.githubusercontent.com/&#10218;user&#10219;/&#10218;project&#10219;/master/content/&#10218;filepath">https://raw.githubusercontent.com/&#10218;user&#10219;/&#10218;project&#10219;/master/content/&#10218;filepath</a>&#10219;
  commits &#8594; <a href="https://github.com/&#10218;user&#10219;/&#10218;project&#10219;/commits/master/content/&#10218;filepath">https://github.com/&#10218;user&#10219;/&#10218;project&#10219;/commits/master/content/&#10218;filepath</a>&#10219;
  "</span></span><span class="org-block">

  (</span><span class="org-block"><span class="keyword">let*</span></span><span class="org-block"> ((github  </span><span class="org-block"><span class="string">"<a href="https://github.com/">https://github.com/</a>"</span></span><span class="org-block">)
     (comm  (</span><span class="org-block"><span class="highlight-defined-function-name">s-split</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"/"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">s-chop-prefix</span></span><span class="org-block"> github url)))
       )

      (</span><span class="org-block"><span class="keyword">setf</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">nth</span></span><span class="org-block"> 2 comm) </span><span class="org-block"><span class="string">"commits"</span></span><span class="org-block">)

      </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">raw, then commits
</span></span><span class="org-block">      `(
       , (</span><span class="org-block"><span class="highlight-defined-function-name">s-prepend</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"<a href="https://raw.githubusercontent.com/">https://raw.githubusercontent.com/</a>"</span></span><span class="org-block">
         (</span><span class="org-block"><span class="highlight-defined-function-name">s-replace</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"/blob/"</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"/"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">s-chop-prefix</span></span><span class="org-block"> github url)))
       .
       ,(</span><span class="org-block"><span class="highlight-defined-function-name">s-prepend</span></span><span class="org-block"> github (</span><span class="org-block"><span class="highlight-defined-function-name">s-join</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"/"</span></span><span class="org-block"> comm))
       )
  )
)
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">make-html-link</span></span><span class="org-block"> (url identifier)
  </span><span class="org-block"><span class="doc">"Yield HTML string code for a link to &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">url</span></span></span><span class="org-block"><span class="doc">&#8217; presented as &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">identifier</span></span></span><span class="org-block"><span class="doc">&#8217;;
   if &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">url</span></span></span><span class="org-block"><span class="doc">&#8217; is non-nil; otherwise, yield only the text &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">identifier</span></span></span><span class="org-block"><span class="doc">&#8217;.
  "</span></span><span class="org-block">
  </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">(message-box url)
</span></span><span class="org-block">  (</span><span class="org-block"><span class="keyword">if</span></span><span class="org-block"> url
      (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"&lt;a href=\""</span></span><span class="org-block"> url </span><span class="org-block"><span class="string">"\" target=\"_self\"&gt;"</span></span><span class="org-block"> identifier </span><span class="org-block"><span class="string">"&lt;/a&gt;"</span></span><span class="org-block">)
      identifier
  )
)
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">make-top-matter</span></span><span class="org-block"> ()
  </span><span class="org-block"><span class="doc">"This is the top-most text that appears right after the article's
   title. It includes viewing the source, a PDF rendition, and
   the most recent date of modification --unless the variables are nil.
  "</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">let*</span></span><span class="org-block"> ((date (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format-time-string</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"%Y-%m-%d"</span></span><span class="org-block">))
     (content </span><span class="org-block"><span class="string">""</span></span><span class="org-block">)
     (rawsrc  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">car</span></span><span class="org-block"> (get-raw-and-commits org.sourcefile)))
     (commits (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">cdr</span></span><span class="org-block"> (get-raw-and-commits org.sourcefile)))
    )

     </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Perform the loop over tuples (constraint url description).
</span></span><span class="org-block">     (</span><span class="org-block"><span class="keyword">dolist</span></span><span class="org-block"> (var `( (,org.nopdf ,blogrepo-file.pdf  </span><span class="org-block"><span class="string">"Read as PDF"</span></span><span class="org-block">   )
             (,org.nopdf nil                 </span><span class="org-block"><span class="string">" or "</span></span><span class="org-block">          )
             (nil ,rawsrc                    </span><span class="org-block"><span class="string">"See the source"</span></span><span class="org-block">)
             (,org.nomodificationdate nil
                ,(</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">" ; "</span></span><span class="org-block"> (</span><span class="org-block"><span class="keyword">unless</span></span><span class="org-block"> org.nopdf </span><span class="org-block"><span class="string">"&lt;br&gt;"</span></span><span class="org-block">)))
             (,org.nomodificationdate ,commits </span><span class="org-block"><span class="string">"Last modified"</span></span><span class="org-block">)
             (,org.nomodificationdate nil ,(</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">" on "</span></span><span class="org-block"> date))
           )
          content)
      </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Unless there are constraints, concatenate the resulting html.
</span></span><span class="org-block">      (</span><span class="org-block"><span class="keyword">unless</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">car</span></span><span class="org-block"> var) (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> content (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> content (make-html-link (</span><span class="org-block"><span class="highlight-defined-function-name">cadr</span></span><span class="org-block"> var) (</span><span class="org-block"><span class="highlight-defined-function-name">caddr</span></span><span class="org-block"> var)))))
     )

     </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">for debugging / drafting,
</span></span><span class="org-block">     (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block">
       (</span><span class="org-block"><span class="keyword">when</span></span><span class="org-block"> org.draft (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"&lt;center&gt; Draft: %s &lt;/center&gt;"</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">gensym</span></span><span class="org-block">)))
       </span><span class="org-block"><span class="string">"&lt;small&gt; &lt;center&gt; &#10216; "</span></span><span class="org-block"> content </span><span class="org-block"><span class="string">" &#10217; &lt;/center&gt; &lt;/small&gt;"</span></span><span class="org-block">)
  )
)
</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Rather than &lt;small&gt;, maybe utilise &lt;font size="3"&gt;.
</span></span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-hide">**</span><span class="org-level-3">* </span><span class="org-special-keyword">COMMENT</span><span class="org-level-3"> org-html-postamble-format at the end of the webpage </span><span class="org-level-3"><span class="org-tag">:old_approach:</span></span>
<span class="org-drawer">    :PROPERTIES:...
</span>
<span class="comment"> # Look at the super short doc to know how to manipulate this variable: (describe-symbol 'org-html-postamble-format)</span>
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">org-html-postamble-format</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">let*</span></span><span class="org-block"> ((nomorg (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">buffer-name</span></span><span class="org-block">))
     (nom    (</span><span class="org-block"><span class="highlight-defined-function-name">file-name-sans-extension</span></span><span class="org-block"> nomorg))
     (src    (make-html-link (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"../content/"</span></span><span class="org-block"> nomorg) </span><span class="org-block"><span class="string">"Org Source"</span></span><span class="org-block">))
     (nompdf (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> blogrepo </span><span class="org-block"><span class="string">"/assets/pdfs/"</span></span><span class="org-block"> nom </span><span class="org-block"><span class="string">".pdf"</span></span><span class="org-block">))
     (pdf    (make-html-link nompdf </span><span class="org-block"><span class="string">"View me as a PDF"</span></span><span class="org-block">))
    )
`((</span><span class="org-block"><span class="string">"en"</span></span><span class="org-block"> ,(</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"&lt;hr&gt; &lt;center&gt; Last modified on %C ; "</span></span><span class="org-block"> pdf </span><span class="org-block"><span class="string">" or see the "</span></span><span class="org-block"> src </span><span class="org-block"><span class="string">" ; Contact me at %e &lt;/center&gt;"</span></span><span class="org-block">))))
)
</span><span class="org-block-end-line"> #+END_SRC
</span>
 To avoid having a postamble altogether we could include
<span class="org-block-begin-line"> #+BEGIN_SRC org
</span><span class="org-block">,#+OPTIONS: html-postamble:nil
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-hide">*</span><span class="org-level-2">* </span><span class="org-level-2"><span class="org-code">preview-article</span></span><span class="org-level-2"> -- the heart of </span><span class="org-level-2"><span class="org-code">AlBasmala.el</span></span>
<span class="org-drawer">   :PROPERTIES:...
</span>
 We make the article in stages:
  0. Go to the Org source and use the native Org utitlies to produce a coloured html file.
  1. Insert the article image into that html file.
     - We do so <span class="bold">before</span> producing the Jekyll markdown variant so that we can preview it correctly.
  2. Remove <span class="writegood-weasels">some</span> clutter from the html, yielding a markdown file.
  3. Prepend the Jekyll header created using the keywords.
  4. Move the markdown file to the <span class="org-code">_posts</span> directory and show the html file in a browser.

<span class="org-drawer"> :Nope:...
</span>
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="highlight-defined-function-name">local-set-key</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">kbd</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"&lt;f7&gt;"</span></span><span class="org-block">) 'preview-article)

  (</span><span class="org-block"><span class="keyword">cl-defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">preview-article</span></span><span class="org-block"> (</span><span class="org-block"><span class="type">&amp;key</span></span><span class="org-block"> (browser nil) (draft nil))
    </span><span class="org-block"><span class="doc">"Create and preview a the html form of the content.

    A non-nil value for &#8220;org.nopdf&#8221; short-circuits the generation of a PDF,
    thereby yielding a possibly faster execution.

    A non-nil value for &#8220;:browser&#8221; opens the article using the default browser.
    This may be undesirable, since it may open </span></span><span class="org-block"><span class="doc"><span class="writegood-weasels">many</span></span></span><span class="org-block"><span class="doc"> tabs in your brower.

    The &#8216;</span></span><span class="org-block"><span class="doc"><span class="constant">draft</span></span></span><span class="org-block"><span class="doc">&#8217; keyword option is here in case we want to override
    whatever the local &#8216;#+DRAFT&#8217; value may be.
    "</span></span><span class="org-block">

    (</span><span class="org-block"><span class="keyword">interactive</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="highlight-defined-function-name">save-buffer</span></span><span class="org-block">)

    (ensure-blog-is-serving)

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Remove any existing html, in case we fail to generate it
</span></span><span class="org-block">    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">we do not want to render an out of date version.
</span></span><span class="org-block">    (</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"rm ~/alhassy.github.io/_posts/"</span></span><span class="org-block"> jekyll.name.md))

    (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">enable-local-variables</span></span><span class="org-block"> nil)
    (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">enable-local-eval</span></span><span class="org-block"> nil)

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">compile coloured html
</span></span><span class="org-block">    (</span><span class="org-block"><span class="highlight-defined-function-name">find-</span></span><span class="org-block"><span class="highlight-defined-function-name"><span class="writegood-duplicates">file</span></span></span><span class="org-block"><span class="writegood-duplicates"> file</span></span><span class="org-block">.org)
    (GetOrgKeyWords)
    (</span><span class="org-block"><span class="keyword">when</span></span><span class="org-block"> draft (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> org.</span><span class="org-block"><span class="writegood-duplicates">draft draft</span></span><span class="org-block">))
    (</span><span class="org-block"><span class="highlight-defined-function-name">org-html-export-to-html</span></span><span class="org-block">)

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Insert image, duh.
</span></span><span class="org-block">    (insert-image-and-other-formats)

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Discard first 3 lines, (note the 1-indexing), since they don't look </span></span><span class="org-block"><span class="comment"><span class="writegood-weasels">very</span></span></span><span class="org-block"><span class="comment"> nice
</span></span><span class="org-block">    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">in the resulting markdown file when rendered on the Jekyll site.
</span></span><span class="org-block">    (</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"tail -n +4 &lt;"</span></span><span class="org-block"> file.html </span><span class="org-block"><span class="string">" &gt;"</span></span><span class="org-block"> jekyll.name.md))

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Preprend file with a header.
</span></span><span class="org-block">    (</span><span class="org-block"><span class="highlight-defined-function-name">find-file</span></span><span class="org-block"> jekyll.name.md)
    (</span><span class="org-block"><span class="highlight-defined-function-name">beginning-of-buffer</span></span><span class="org-block">)
    (MakeHeader)
    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">insert</span></span><span class="org-block"> HEADER)
    (</span><span class="org-block"><span class="highlight-defined-function-name">save-buffer</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">kill-buffer</span></span><span class="org-block"> jekyll.name.md)

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Move it to posts directory.
</span></span><span class="org-block">    (</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"mv "</span></span><span class="org-block"> jekyll.name.md </span><span class="org-block"><span class="string">" "</span></span><span class="org-block"> blogrepo-posts))

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">;; Uncomment for debugging.
</span></span><span class="org-block">    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">;; (find-file (concat "~/alhassy.github.io/_posts/" jekyll.name.md))
</span></span><span class="org-block">
    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">no pdf generation in draft mode
</span></span><span class="org-block">    (</span><span class="org-block"><span class="keyword">unless</span></span><span class="org-block"> (</span><span class="org-block"><span class="keyword">or</span></span><span class="org-block"> org.draft org.nopdf) (my-org-latex-export-to-pdf))

    </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Preview locally in browser.
</span></span><span class="org-block">    (</span><span class="org-block"><span class="keyword">when</span></span><span class="org-block"> browser
      (</span><span class="org-block"><span class="keyword">let*</span></span><span class="org-block"> ((buf (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"*AlBasmala*"</span></span><span class="org-block"> NAME </span><span class="org-block"><span class="string">"*"</span></span><span class="org-block">)))

        (toggle </span><span class="org-block"><span class="highlight-defined-variable-name">kill-buffer-query-functions</span></span><span class="org-block"> nil (</span><span class="org-block"><span class="keyword">ignore-errors</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">kill-buffer</span></span><span class="org-block"> buf)))
        (</span><span class="org-block"><span class="highlight-defined-function-name">async-shell-command</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"open <a href="http://localhost:4000/">http://localhost:4000/</a>"</span></span><span class="org-block"> NAME </span><span class="org-block"><span class="string">"/"</span></span><span class="org-block">) buf)
      )
    )

    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">message</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"Article has </span></span><span class="org-block"><span class="string"><span class="writegood-passive-voice">been opened</span></span></span><span class="org-block"><span class="string"> in your browser."</span></span><span class="org-block">)

    (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">enable-local-variables</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">t</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">enable-local-eval</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-defined-variable-name">t</span></span><span class="org-block">)
  )
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="org-hide">*</span><span class="org-level-2">* </span><span class="org-special-keyword">COMMENT</span><span class="org-level-2"> Version control                     </span><span class="org-level-2"><span class="org-tag">:Deprecated:Before_magit_time:</span></span>
<span class="org-drawer">   :PROPERTIES:...
</span>
   A <span class="writegood-weasels">simple</span> version control mechanism; will likely switch to <span class="org-code">magit</span> in the future.

<span class="org-block-begin-line">  #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="highlight-defined-function-name">global-set-key</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-function-name">kbd</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"&lt;f8&gt;"</span></span><span class="org-block">) 'commit)

(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">commit</span></span><span class="org-block"> () </span><span class="org-block"><span class="doc">"Commit changes to git in the form: &#8220;ChangedFile: CommitMessage&#8221;."</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">interactive</span></span><span class="org-block">)

  </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">In-case the article </span></span><span class="org-block"><span class="comment"><span class="writegood-passive-voice">was updated</span></span></span><span class="org-block"><span class="comment"> but we forgot to produce new generated files.
</span></span><span class="org-block">  (preview-article)

  (</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"rm *.html"</span></span><span class="org-block">)   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">remove noise
</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">let</span></span><span class="org-block"> ((msg (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">read-string</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"Commit message for %s: "</span></span><span class="org-block"> NAME))))
   </span><span class="org-block"><span class="comment-delimiter">; </span></span><span class="org-block"><span class="comment">(shell-command (format "git add    ../_posts/%s ../content/</span></span><span class="org-block"><span class="comment"><span class="writegood-duplicates">%s %s</span></span></span><span class="org-block"><span class="comment"> %s" jekyll.name.md file.org blogrepo-file.pdf file.el))
</span></span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">; </span></span><span class="org-block"><span class="comment">(shell-command (format "git commit ../_posts/%s ../content/</span></span><span class="org-block"><span class="comment"><span class="writegood-duplicates">%s %s</span></span></span><span class="org-block"><span class="comment"> %s -m \"%s: %s\"" jekyll.name.md file.org blogrepo-file.pdf file.el NAME msg))
</span></span><span class="org-block">
   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#8220;git add commitables&#8221;
</span></span><span class="org-block">   (</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block">  (</span><span class="org-block"><span class="highlight-defined-function-name">s-join</span></span><span class="org-block"> </span><span class="org-block"><span class="string">" "</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">cons</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"git add"</span></span><span class="org-block"> commitables)))

   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">&#8220;git commit commitables -m NAME: message&#8221;
</span></span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Note that the commit message needs to be in quotes.
</span></span><span class="org-block">   (</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block">  (</span><span class="org-block"><span class="highlight-defined-function-name">s-join</span></span><span class="org-block"> </span><span class="org-block"><span class="string">" "</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">append</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">cons</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"git commit"</span></span><span class="org-block"> commitables) (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">list</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"-m \"%s: %s\""</span></span><span class="org-block"> NAME msg)))))
  )
)
</span><span class="org-block-end-line">  #+END_SRC
</span>
<span class="org-hide">*</span><span class="org-level-2">* Publish</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
<span class="org-block-begin-line"> #+BEGIN_SRC emacs-lisp :tangle AlBasmala.el
</span><span class="org-block">(</span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">publish</span></span><span class="org-block"> () </span><span class="org-block"><span class="doc">"Send material to github pages."</span></span><span class="org-block">
  (</span><span class="org-block"><span class="keyword">interactive</span></span><span class="org-block">)

  (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">message</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"Publishing article: %s "</span></span><span class="org-block"> NAME))

  (</span><span class="org-block"><span class="highlight-defined-function-name">shell-command</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"rm *.html"</span></span><span class="org-block">)   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">remove noise
</span></span><span class="org-block">
  (</span><span class="org-block"><span class="highlight-defined-function-name">eshell</span></span><span class="org-block">)
  (</span><span class="org-block"><span class="keyword">with-current-buffer</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"*eshell*"</span></span><span class="org-block">
    (eshell-return-to-prompt)
    (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">insert</span></span><span class="org-block"> (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">concat</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"cd ~/alhassy.github.io/_posts/"</span></span><span class="org-block">
            </span><span class="org-block"><span class="string">" ; "</span></span><span class="org-block">
            (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"git add </span></span><span class="org-block"><span class="string"><span class="writegood-duplicates">%s %s</span></span></span><span class="org-block"><span class="string">"</span></span><span class="org-block"> jekyll.name.md blogrepo-file.pdf))
            </span><span class="org-block"><span class="string">" ; "</span></span><span class="org-block">
            (</span><span class="org-block"><span class="highlight-defined-builtin-function-name">format</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"git commit </span></span><span class="org-block"><span class="string"><span class="writegood-duplicates">%s %s</span></span></span><span class="org-block"><span class="string"> -m \"%s: %s\""</span></span><span class="org-block"> jekyll.name.md blogrepo-file.pdf NAME </span><span class="org-block"><span class="string">"Article updated."</span></span><span class="org-block">)
            </span><span class="org-block"><span class="string">" ; "</span></span><span class="org-block">
            </span><span class="org-block"><span class="string">"git push"</span></span><span class="org-block">)
    (</span><span class="org-block"><span class="highlight-defined-function-name">switch-to-buffer</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"*eshell*"</span></span><span class="org-block">)
    (eshell-send-input)
  )
)
</span><span class="org-block-end-line"> #+END_SRC
</span>
<span class="comment"> # Remember it takes 10 seconds for the live github page to actually change!</span>

<span class="org-hide">*</span><span class="org-level-2">* Usage</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
<span class="comment"> # Within src blocks containing org, you need to escape org heading, the `*`, delimiters with a comma.</span>
<span class="comment"> # E.g.: ,* My heading</span>


<span class="org-block-begin-line"> #+BEGIN_EXPORT html
</span><span class="org-block"> &lt;</span><span class="org-block"><span class="function-name">table</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">style</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"width:100%"</span></span><span class="org-block">&gt;
   &lt;</span><span class="org-block"><span class="function-name">tr</span></span><span class="org-block">&gt;
</span><span class="org-block-end-line"> #+END_EXPORT
</span>
<span class="org-meta-line"> #+HTML: &lt;td&gt;</span>
 The <span class="org-link"><a href="file:template.org">example</a></span> source,
<span class="org-meta-line"> #+HTML: &lt;small&gt;</span>
<span class="org-meta-line"> #+INCLUDE: "template.org" src org</span>
<span class="org-meta-line"> #+HTML: &lt;/small&gt; &lt;/td&gt;</span>

<span class="org-meta-line"> #+HTML:  &lt;td&gt; Results in, &lt;br&gt; &lt;br&gt; &lt;br&gt;</span>
<span class="org-block-begin-line"> #+BEGIN_EXPORT html
</span><span class="org-block"> &lt;</span><span class="org-block"><span class="function-name">iframe</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">src</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"../assets/demoing_template.html"</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">style</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"width:100%"</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">height</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"487"</span></span><span class="org-block">&gt;
     alternative content for browsers which do not support iframe.
 &lt;/</span><span class="org-block"><span class="function-name">iframe</span></span><span class="org-block">&gt;
</span><span class="org-block-end-line"> #+END_EXPORT
</span><span class="org-meta-line"> #+HTML:  &lt;/td&gt;</span>
<span class="org-block-begin-line"> #+BEGIN_EXPORT html
</span><span class="org-block">   &lt;/</span><span class="org-block"><span class="function-name">tr</span></span><span class="org-block">&gt;
 &lt;/</span><span class="org-block"><span class="function-name">table</span></span><span class="org-block">&gt;
</span><span class="org-block-end-line"> #+END_EXPORT
</span>
<span class="org-meta-line"> #+latex: In the LaTeX format, this content is not supported.</span>


<span class="org-hide">*</span><span class="org-level-2">* footer</span>
<span class="org-drawer">   :PROPERTIES:...
</span>
 NOTE: It takes about 20secs ~ 1min for the changes to be live on github pages.

<span class="org-level-1">* </span><span class="org-special-keyword">COMMENT</span><span class="org-level-1"> Mention alternative to using &#8220;Abstract&#8221;</span>
<span class="org-drawer">  :PROPERTIES:...
</span>
src: <span class="org-link"><a href="https://ogbe.net/blog/blogging_with_org.html">https://ogbe.net/blog/blogging_with_org.html</a></span>

  When I write a blog post, I enclose the "preview" part of the post in #+BEGIN_PREVIEW...#+END_PREVIEW tags, which my (<span class="writegood-weasels">very</span> <span class="writegood-weasels">simple</span>) parser then inserts into the sitemap page.

(defun my-blog-get-preview (file)
  "The comments in FILE have to be on their own lines, prefereably before and after paragraphs."
  (with-temp-buffer
    (insert-file-contents file)
    (goto-char (point-min))
    (let ((beg (+ 1 (re-search-forward "^#\\+BEGIN_PREVIE<span class="org-latex-and-related">W$")))
          (end (progn (re-search-forward "^#\\+END_PREVIEW$"</span>)
                      (match-beginning 0))))
      (buffer-substring beg end))))
</pre>
  </body>
</html>
